{"CLs":[{"__type":"LD","Not":true,"Var":"ENO"},{"__type":"JMP","Ix":1,"Label":"EndFB","X":1}],"LRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"a979e174-5a71-465c-86e1-317d00000006","Up":true,"Var":"Enabled"},{"__type":"LD","Ix":2,"Var":"P_First_Run","Y":1},{"__type":"LD","Ix":1,"Var":"Enabled","X":1,"Y":1},{"__type":"HL","X":1},{"__type":"IST","EID":"d4c819b8-5e98-4704-9046-305cf33465d1","H":178,"Ix":21,"TXT":"\/\/ Define power limit of laser\u000d\u000aMyLaser.Cfg.Power_Max := Power_Max;\u000d\u000aMyLaser.Cfg.Power_Min := Power_Max * 0.10;\u0009\/\/ Laser can't go under 10%\u000d\u000a\u000d\u000a\/\/ Compute analog output limit\u000d\u000aLIMIT_MIN :=  REAL_TO_INT( MyLaser.Cfg.Power_Min \/ Power_Max * 4000 );","W":937,"X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyLaser.Corr.SP_a"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"0"}],"Ix":15,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":9,"Type":"ANY","Var":"+1"}],"Ix":16,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":10,"Type":"ANY","Var":"MyLaser.Corr.SP_a"}],"X":3,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyLaser.Corr.FB_a"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"ANY_ELEMENTARY, ENUM","Var":"0"}],"Ix":17,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":11,"Type":"ANY","Var":"+1"}],"Ix":18,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":12,"Type":"ANY","Var":"MyLaser.Corr.FB_a"}],"X":3,"Y":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":7,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyLaser.Cmd.PulseTime"},{"__type":"PRM","Arg":"In2","Ix":8,"Type":"ANY_ELEMENTARY, ENUM","Var":"0"}],"Ix":19,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":3,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":13,"Type":"ANY","Var":"+10"}],"Ix":20,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":14,"Type":"ANY","Var":"MyLaser.Cmd.PulseTime"}],"X":3,"Y":3},{"__type":"HL","X":3}],"CMT":"Init value","LRI":22,"RRI":23,"VLs":[{"Ix":24,"X":2},{"Ix":24,"X":2,"Y":1},{"Ix":24,"X":2,"Y":2}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"ST","Ix":2,"Var":"MyLaser.Status.Enabled","X":1},{"__type":"ST","Ix":4,"Var":"MyLaser.Cfg.IPG_Used","X":1,"Y":1},{"__type":"LD","Ix":1,"Var":"Commissioning","X":1,"Y":2},{"__type":"ST","Ix":3,"Var":"MyLaser.Status.Commissioning","X":2,"Y":2},{"__type":"HL","X":2},{"__type":"HL","X":2,"Y":1}],"CMT":"Config","LRI":5,"RRI":6,"VLs":[{"Ix":7,"X":1},{"Ix":7,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":1,"Not":true,"Var":"L_PS_Act","X":1},{"__type":"LD","Ix":2,"Not":true,"Var":"L_PowerOn","X":2},{"__type":"LD","Ix":3,"Not":true,"Var":"L_ErrRdy","X":3},{"__type":"ST","Ix":4,"Var":"IsOff","X":4}],"CMT":"Laser is Off","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"MyLaser.Status.Enabled"},{"__type":"LD","Var":"L_StartPwr","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":7,"Type":"TIME","Var":"T#500ms"}],"Ix":10,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":8,"Type":"TIME","Var":""}],"X":2,"Var":"Wait_To_Start"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":5,"Type":"TIME","Var":"T#300ms"}],"Ix":9,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":6,"Type":"TIME","Var":""}],"X":3,"Var":"Pulse"},{"__type":"ST","Ix":3,"Var":"L_Start","X":4},{"__type":"LD","Ix":2,"Not":true,"Var":"L_ErrRdy","X":1,"Y":1},{"__type":"ST","Ix":4,"Var":"L_Reset","X":2,"Y":1},{"__type":"HL","X":3,"Y":1},{"__type":"HL","X":4,"Y":1}],"CMT":"Turn on the Laser","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":1}]}
{"CLs":[{"__type":"LD","Var":"L_PS_Act"},{"__type":"ST","Ix":1,"Var":"MyLaser.Status.Powered","X":1}],"CMT":"Check if the Laser is Powered and Ready","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"MyLaser.Status.Powered"},{"__type":"LD","Var":"L_ErrRdy","X":1},{"__type":"ST","Ix":4,"Var":"MyLaser.Status.Ready","X":2},{"__type":"LD","Ix":1,"Var":"L_IsShoot","X":2,"Y":1},{"__type":"ST","Ix":5,"Var":"MyLaser.Status.Shooting","X":3,"Y":1},{"__type":"LD","Ix":3,"Not":true,"Var":"L_ErrRdy","X":1,"Y":2},{"__type":"ST","Ix":6,"Var":"MyLaser.Status.Fault","X":2,"Y":2},{"__type":"HL","X":3},{"__type":"HL","X":3,"Y":2}],"CMT":"Status","LRI":7,"RRI":8,"VLs":[{"Ix":9,"X":2},{"Ix":10,"X":1},{"Ix":10,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"MyLaser.Status.Powered"},{"__type":"IST","EID":"247268ed-60dc-4c61-a97b-4f6fdb4248a2","H":190,"Ix":1,"TXT":"\/\/ Applay Ax+B\u000d\u000aPower_WithCorr := MyLaser.Cmd.Power * MyLaser.Corr.SP_a + MyLaser.Corr.SP_b;\u000d\u000a\u000d\u000a\/\/ Power command for the laser. (The anal. input works with 1-10VDC = 1-10% of command)\u000d\u000aPower_Temp := REAL_TO_INT((4000.0 * Power_WithCorr) \/ MyLaser.Cfg.Power_Max) ;\u000d\u000a\u000d\u000a\/\/Limitations of Power\u000d\u000aPower_SP :=LIMIT(LIMIT_MIN, Power_Temp, INT#4000);","W":1210,"X":1}],"CMT":"Calculation of the power","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyLaser.Cmd.PulseTime"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"PulseTime_Backup"}],"Ix":5,"Name":"<>","Out":[{"__type":"PF","Arg":""}]},{"__type":"IST","EID":"be7c0194-4616-41a6-bca6-7e8af0c890c3","H":128,"Ix":6,"TXT":"\/\/ Calcul time REAL [s] to [ms]\u000d\u000aPulseTimeREALms\u0009:=\u0009 MyLaser.Cmd.PulseTime \/ 1000;\u000d\u000a\u000d\u000a\/\/ Save backup\u000d\u000aPulseTime_Backup := MyLaser.Cmd.PulseTime;","W":694,"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Type":"REAL","Var":"PulseTimeREALms"}],"Ix":4,"Name":"REAL_TO_TIME","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":1,"Type":"TIME","Var":"PulseDuration"}],"UD":true,"X":1,"Y":1}],"CMT":"Calculation of the time [s] to [ms]","LRI":7,"RRI":8,"VLs":[{"Ix":9,"X":1}]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"Enabled"},{"__type":"LD","Var":"MyLaser.Status.Shooting","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"L_Pwr_FB"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"-9999"}],"Ix":15,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":5,"Type":"ANY","Var":"MyLaser.Cmd.Power"}],"Ix":16,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":6,"Type":"ANY","Var":"MyLaser.Status.Power"}],"X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":7,"Type":"ANY_ELEMENTARY, ENUM","Var":"L_Pwr_FB"},{"__type":"PRM","Arg":"In2","Ix":8,"Type":"ANY_ELEMENTARY, ENUM","Var":"-9999"}],"Ix":17,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":9,"Type":"ANY","Var":"L_Pwr_FB"}],"Ix":18,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":10,"Type":"ANY","Var":"MyLaser.Status.Power"}],"X":3,"Y":1},{"__type":"LD","Ix":2,"Not":true,"Var":"MyLaser.Status.Shooting","X":1,"Y":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":13,"Type":"ANY_ELEMENTARY, ENUM","Var":"L_Pwr_FB"},{"__type":"PRM","Arg":"In2","Ix":14,"Type":"ANY_ELEMENTARY, ENUM","Var":"-9999"}],"Ix":20,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":11,"Type":"ANY","Var":"0"}],"Ix":19,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":12,"Type":"ANY","Var":"MyLaser.Status.Power"}],"X":3,"Y":2}],"CMT":"Power FeedBack","LRI":21,"RRI":22,"VLs":[{"Ix":23,"X":1},{"Ix":23,"X":1,"Y":1},{"Ix":24,"X":2}]}
{"CLs":[{"__type":"LD","Ix":3,"Var":"MyLaser.Status.Enabled"},{"__type":"LD","Var":"MyLaser.Status.Ready","X":1},{"__type":"LD","Ix":1,"Var":"MyLaser.Cmd.Shoot","X":2},{"__type":"LD","Ix":4,"Var":"MyLaser.Cmd.OnePulse","X":2,"Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":7,"Type":"TIME","Var":"PulseDuration"}],"Ix":9,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":8,"Type":"TIME","Var":""}],"X":3,"Y":1,"Var":"Timer_Pulse"},{"__type":"HL","X":3},{"__type":"ST","Ix":5,"Var":"L_Shoot","X":4},{"__type":"LD","Ix":2,"Var":"MyLaser.Cmd.Pointer","X":1,"Y":2},{"__type":"ST","Ix":6,"Var":"L_Pointer","X":2,"Y":2},{"__type":"HL","X":3,"Y":2},{"__type":"HL","X":4,"Y":2}],"CMT":"command to shoot with the laser","LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":1},{"Ix":12,"X":1,"Y":1},{"Ix":13,"X":2},{"Ix":14,"X":4}]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"G","Ix":1,"Type":"BOOL","Var":"L_Shoot"},{"__type":"PRM","Arg":"In0","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"INT#0"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"Power_SP"}],"Ix":5,"Name":"SEL","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"L_Pwr_SP"}],"X":1}],"CMT":"Analog Control: Set the power setpoint value to 0 if the main power, PS or emission is OFF","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Dwn":true,"Id":"a979e174-5a71-465c-86e1-317d00000095","Ix":1,"Var":"Enabled","Y":1},{"__type":"ST","Ix":2,"Var":"ENO","X":1}],"CMT":"EndFB","LI":3,"LRI":4,"Label":"EndFB","RRI":5,"VLs":[{"Ix":6,"X":1}]}
