{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":2,"Type":"TIME","Var":"T#1s"},{"__type":"PRM","Arg":"Reset","Ix":3,"Type":"BOOL","Var":"Cmd_Clean"}],"Ix":5,"Name":"AccumulationTimer","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":1,"Var":"TimeRset"},{"__type":"ST","Ix":1,"Var":"Cmd_Clean","X":2}],"CMT":"Order to clean","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Cmd_Clean"},{"__type":"LD","Ix":1,"Var":"test","Y":1},{"__type":"IST","EID":"9bd853ef-60d3-4417-a678-fbe70a2509b2","H":880.99999999999977,"Ix":2,"TXT":"\/\/ Save datas of alarms\u000d\u000aCleanPos := MyProd.Position + Position;\u000d\u000a\u000d\u000a\/\/ For last alarm position\u000d\u000aLastPosChange := TRUE;\u000d\u000a\u000d\u000a\/\/ Check every alarms\u000d\u000aFor i := MyProd.Last_Alarm To 0  By -1 DO\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Check if alarm is enabled\u000d\u000a\u0009IF MyProd.Alarms[i].Enabled THEN\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\/\/ If alarm is still occuring, don't clean it\u000d\u000a\u0009\u0009IF not MyProd.Alarms[i].State THEN\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\/\/ If end of alarm position if after clean position\u000d\u000a\u0009\u0009\u0009IF MyProd.Alarms[i].PosStop +Position < MyProd.Position  THEN\u000d\u000a\u0009\u0009\u0009\u0009\/\/ Disabled alarm\u000d\u000a\u0009\u0009\u0009\u0009MyProd.Alarms[i].Enabled:=FALSE;\u000d\u000a\u0009\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009\/\/ Reset overflow alarms\u000d\u000a\u0009\u0009\u0009\u0009MyProd.Msg.TooMuchAlarm_Fault := FALSE;\u000d\u000a\u0009\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009\/\/ Decrement the number of alarms\u000d\u000a\u0009\u0009\u0009\u0009Dec(MyProd.Counter_Alarms);\u000d\u000a\u000d\u000a\u0009\u0009\u0009\u0009\/\/ Change last position if needed\u000d\u000a\u0009\u0009\u0009\u0009IF LastPosChange THEN\u000d\u000a\u0009\u0009\u0009\u0009\u0009MyProd.Last_Alarm := MyProd.Last_Alarm - 1;\u000d\u000a\u0009\u0009\u0009\u0009END_IF;\u000d\u000a\u0009\u0009\u0009ELSE\u000d\u000a\u0009\u0009\u0009\u0009LastPosChange := FALSE;\u000d\u000a\u0009\u0009\u0009END_IF;\u000d\u000a\u0009\u000d\u000a\u0009\u0009ELSE\u000d\u000a\u0009\u0009\u0009LastPosChange := FALSE;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009ELSE\u000d\u000a\u0009\u0009\u0009\/\/ Change last position if needed\u000d\u000a\u0009\u0009\u0009IF LastPosChange THEN\u000d\u000a\u0009\u0009\u0009\u0009MyProd.Last_Alarm := MyProd.Last_Alarm - 1;\u000d\u000a\u0009\u0009\u0009END_IF;\u0009\u0009\u000d\u000a\u0009END_IF;\u000d\u000a\u0009\u000d\u000aEND_FOR;","W":854,"X":1}],"CMT":"______________________________________________________________________________________________________\u000a¦  When alarm finish.                                                                                                                         ¦\u000a¦_____________________________________________________________________________________________________¦\u000d\u000a\u000d\u000aSave end of alarm position","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
