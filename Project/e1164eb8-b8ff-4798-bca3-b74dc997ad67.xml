{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"CamStart_MasterPos"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"-999.0"}],"Ix":6,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"CamStart_MasterPos"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"-1000"}],"Ix":7,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1,"PL":true},{"__type":"ST","Ix":1,"S":true,"Var":"CamStart_MasterPos_modified","X":2}],"CMT":"Check if the cam Master starting position argument is by default","LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":1},{"Ix":11,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Execute"},{"__type":"LD","Id":"620493bd-2e32-4801-acc8-2e7200000010","Ix":1,"Up":true,"Var":"Execute","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":3,"Type":"ANY","Var":"Pos_ReferenceSide"}],"Ix":33,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":4,"Type":"ANY","Var":"Backup_Pos_ReferenceSide"}],"X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":5,"Type":"ANY","Var":"Pos_OppositeSide"}],"Ix":34,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":6,"Type":"ANY","Var":"Backup_Pos_OppositeSide"}],"X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":7,"Type":"ANY","Var":"Stop_ReferenceSide"}],"Ix":35,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":8,"Type":"ANY","Var":"Backup_Stop_ReferenceSide"}],"X":2,"Y":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":9,"Type":"ANY","Var":"Stop_OppositeSide"}],"Ix":36,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":10,"Type":"ANY","Var":"Backup_Stop_OppositeSide"}],"X":2,"Y":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":11,"Type":"ANY","Var":"Pitch"}],"Ix":37,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":12,"Type":"ANY","Var":"Backup_Pitch"}],"X":2,"Y":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":13,"Type":"ANY_ELEMENTARY, ENUM","Var":"Pos_ReferenceSide"},{"__type":"PRM","Arg":"In2","Ix":14,"Type":"ANY_ELEMENTARY, ENUM","Var":"Backup_Pos_ReferenceSide"}],"Ix":38,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":5},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":15,"Type":"ANY","Var":"Pos_ReferenceSide"}],"Ix":39,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":16,"Type":"ANY","Var":"Backup_Pos_ReferenceSide"}],"X":2,"Y":5},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":17,"Type":"ANY_ELEMENTARY, ENUM","Var":"Pos_OppositeSide"},{"__type":"PRM","Arg":"In2","Ix":18,"Type":"ANY_ELEMENTARY, ENUM","Var":"Backup_Pos_OppositeSide"}],"Ix":40,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":6},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":25,"Type":"ANY","Var":"Pos_OppositeSide"}],"Ix":44,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":26,"Type":"ANY","Var":"Backup_Pos_OppositeSide"}],"X":2,"Y":6},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":19,"Type":"ANY_ELEMENTARY, ENUM","Var":"Stop_ReferenceSide"},{"__type":"PRM","Arg":"In2","Ix":20,"Type":"ANY_ELEMENTARY, ENUM","Var":"Backup_Stop_ReferenceSide"}],"Ix":41,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":7},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":27,"Type":"ANY","Var":"Stop_ReferenceSide"}],"Ix":45,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":28,"Type":"ANY","Var":"Backup_Stop_ReferenceSide"}],"X":2,"Y":7},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":21,"Type":"ANY_ELEMENTARY, ENUM","Var":"Stop_OppositeSide"},{"__type":"PRM","Arg":"In2","Ix":22,"Type":"ANY_ELEMENTARY, ENUM","Var":"Backup_Stop_OppositeSide"}],"Ix":42,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":8},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":29,"Type":"ANY","Var":"Stop_OppositeSide"}],"Ix":46,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":30,"Type":"ANY","Var":"Backup_Stop_OppositeSide"}],"X":2,"Y":8},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":23,"Type":"ANY_ELEMENTARY, ENUM","Var":"Pitch"},{"__type":"PRM","Arg":"In2","Ix":24,"Type":"ANY_ELEMENTARY, ENUM","Var":"Backup_Pitch"}],"Ix":43,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":9},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":31,"Type":"ANY","Var":"Pitch"}],"Ix":47,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":32,"Type":"ANY","Var":"Backup_Pitch"}],"X":2,"Y":9},{"__type":"ST","Ix":2,"S":true,"Var":"Values_Changes","X":3}],"CMT":"Test if value on HMI have changed","LRI":48,"RRI":49,"VLs":[{"Ix":50,"X":2},{"Ix":50,"X":2,"Y":1},{"Ix":50,"X":2,"Y":2},{"Ix":50,"X":2,"Y":3},{"Ix":51,"X":3},{"Ix":51,"X":3,"Y":1},{"Ix":51,"X":3,"Y":2},{"Ix":51,"X":3,"Y":3},{"Ix":51,"X":3,"Y":4},{"Ix":51,"X":3,"Y":5},{"Ix":51,"X":3,"Y":6},{"Ix":51,"X":3,"Y":7},{"Ix":51,"X":3,"Y":8},{"Ix":52,"X":1},{"Ix":52,"X":1,"Y":1},{"Ix":52,"X":1,"Y":2},{"Ix":52,"X":1,"Y":3},{"Ix":52,"X":1,"Y":4},{"Ix":52,"X":1,"Y":5},{"Ix":52,"X":1,"Y":6},{"Ix":52,"X":1,"Y":7},{"Ix":52,"X":1,"Y":8}]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"Execute"},{"__type":"LD","Var":"Cam_Busy","X":1},{"__type":"LD","Ix":5,"Not":true,"Var":"Cam_Generate.Busy","X":2},{"__type":"LD","Id":"620493bd-2e32-4801-acc8-2e7200000046","Ix":1,"Up":true,"Var":"Pause","X":3},{"__type":"ST","Ix":8,"S":true,"Var":"Pause_Run","X":4},{"__type":"LD","Ix":6,"Var":"ToReference","X":4,"Y":1},{"__type":"ST","Ix":9,"S":true,"Var":"OnlyReturn","X":5,"Y":1},{"__type":"LD","Ix":3,"Var":"Pause_Run","X":1,"Y":2},{"__type":"LD","Ix":7,"Not":true,"Var":"CamGenerationDone","X":2,"Y":2},{"__type":"LD","Ix":4,"Not":true,"Var":"Pause","X":3,"Y":2},{"__type":"IST","EID":"fef8750c-692d-4a94-a15f-672d8f67c2e2","H":392,"Ix":10,"TXT":"\/\/ Get the traversing distance of a ramp\u000d\u000aStop_Angle := 180;\u000d\u000aStop_Dist := Pitch \/ 360 * Stop_Angle * 0.6;\u000d\u000aSafe_Dist := Stop_Dist * 3;\u0009\u0009\/\/ Safety distance\u000d\u000a\u000d\u000a\/\/ If we are near the refercence side, force a full cam\u000d\u000aIF LREAL_TO_REAL(Slave.Act.Pos) < (Pos_ReferenceSide + Safe_Dist) THEN\u000d\u000a\u0009OnlyReturn := FALSE;\u000d\u000aEND_IF;\u000d\u000a\u0009\u000d\u000a\/\/ If we are near the opposite side, force an half cam\u000d\u000aIF LREAL_TO_REAL(Slave.Act.Pos) > (Pos_OppositeSide - Safe_Dist) THEN\u000d\u000a\u0009OnlyReturn := TRUE;\u000d\u000a\u0009FirstCam_WithOffset := TRUE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ End of pause\u000d\u000aPause_Run := FALSE;","W":862,"X":4,"Y":2},{"__type":"HL","X":5},{"__type":"HL","X":5,"Y":2}],"CMT":"Pause management","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":1},{"Ix":13,"X":1,"Y":1},{"Ix":14,"X":4}]}
{"CLs":[{"__type":"LD","Var":"Values_Changes"},{"__type":"LD","Ix":2,"Var":"FirstCam_WithOffset","Y":1},{"__type":"LD","Ix":1,"Var":"Cam_Start.EndOfProfile","X":1},{"__type":"LD","Id":"620493bd-2e32-4801-acc8-2e7200000058","Ix":3,"Up":true,"Var":"Execute","Y":2},{"__type":"LD","Dwn":true,"Id":"620493bd-2e32-4801-acc8-2e7200000059","Ix":4,"Var":"Pause_Run","Y":3},{"__type":"HL","X":1,"Y":2},{"__type":"HL","X":1,"Y":3},{"__type":"IST","EID":"d1f8c96d-2d05-443d-8c88-8096f59212ab","H":439,"Ix":5,"TXT":"\/\/ Reset recomputation of cam\u000d\u000aIF FirstCam_WithOffset THEN\u000d\u000a\u0009FirstCam_WithOffset := FALSE;\u000d\u000aEND_IF ;\u000d\u000a\u000d\u000a\/\/ Compute value\u000d\u000aPos_Start_Abs := Pos_ReferenceSide;\u000d\u000aPos_Opposite_Abs := Pos_OppositeSide;\u000d\u000aOffset_Pos_AtStart := LREAL_TO_REAL(Slave.Cmd.Pos) - Pos_Start_Abs;\u0009\u0009\/\/ 0 if started in good place, pos if started after\u000d\u000a\u000d\u000a\/\/ Get the stop angle on reference side\u000d\u000aDeg_Wait_Start := Stop_ReferenceSide;\u000d\u000aIF Deg_Wait_Start = 0 THEN\u000d\u000a\u0009Deg_Wait_Start := 1;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Get the stop angle on opposite side\u000d\u000aDeg_Wait_End :=  Stop_OppositeSide;\u000d\u000aIF Deg_Wait_End = 0 THEN\u000d\u000a\u0009Deg_Wait_End := 1;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Check if cam is started with an offset, if yes, set bit to restart a computing after fisrt execution\u000d\u000aIF Offset_Pos_AtStart > 1 OR Offset_Pos_AtStart < -1 THEN\u000d\u000a\u0009FirstCam_WithOffset := TRUE;\u000d\u000aELSE\u000d\u000a\u0009FirstCam_WithOffset := FALSE;\u000d\u000a\u0009\/\/ Reset the end position\u000d\u000a\u0009Offset_Pos_AtStart := 0;\u0009\u000d\u000aEND_IF ;\u000d\u000a\u000d\u000a\/\/ Check if start position is after end position\u000d\u000aIF LREAL_TO_REAL(Slave.Cmd.Pos) > Pos_Opposite_Abs THEN\u000d\u000a\u0009OnlyReturn := TRUE;\u000d\u000a\u0009FirstCam_WithOffset := TRUE;\u000d\u000aEND_IF;\u000d\u000a\u0009\u000d\u000a\/\/ Compute cam position in relative\u000d\u000aPos_Start := 0; \/\/ Start position of cam is always 0\u000d\u000aPos_Opposite := Pos_Opposite_Abs - Pos_Start_Abs - Offset_Pos_AtStart;\u000d\u000aPos_End := Offset_Pos_AtStart * -1 ;\u000d\u000a\u000d\u000a\/\/ Compute travel distance for pitch computation\u000d\u000aTravel_Distance_Pos := Pos_Opposite-Pos_Start;\u000d\u000aTravel_Distance_Neg := Pos_Opposite - Pos_End;\u000d\u000a\u000d\u000a\/\/ If we make only the return movement, the negative travel distance must be the current position\u000d\u000aIF OnlyReturn THEN\u000d\u000a\u0009Travel_Distance_Neg := LREAL_TO_REAL(Slave.Act.Pos) - Pos_Start_Abs;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Cam property\u000d\u000aCamProperty.CycleTime := REAL#1.000;\u000d\u000a\u000d\u000a\/\/ Define value of ramp befor stop\u000d\u000aStop_Angle := 180;\u000d\u000aStop_Dist := Pitch \/ 360 * Stop_Angle * 0.6;\u000d\u000a\u000d\u000aIF OnlyReturn = FALSE THEN\u000d\u000a\u0009\/\/ 0: Node for creating a starting ramp befor moving to opposite side\u000d\u000a\u0009Node[0].Distance := Stop_Dist; \/\/ Pitch \/ 2;\u000d\u000a\u0009Node[0].Phase := Stop_Angle; \/\/ 360;\u000d\u000a\u0009Node[0].Curve := _eMC_CAM_CURVE#_mcPolynomic5;\u000d\u000a\u000d\u000a\u0009\/\/ 2: Node for the end of moving to opposite side\u000d\u000a\u0009Node[2].Distance := Pos_Opposite;\u000d\u000a\u0009Node[2].Phase := Travel_Distance_Pos * 360 \/ Pitch;\u000d\u000a\u0009Node[2].Curve := _eMC_CAM_CURVE#_mcPolynomic5;\u000d\u000a\u000d\u000a\u0009\/\/ 1: Node for creating a stopping ramp befor waiting in opposite side\u000d\u000a\u0009Node[1].Distance := Node[2].Distance - Stop_Dist; \/\/(Pitch\/2);\u000d\u000a\u0009Node[1].Phase := Node[2].Phase - Stop_Angle; \/\/ 360;\u000d\u000a\u0009Node[1].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000a\u000d\u000a\u0009\/\/ 3: Node for waiting in opposite side\u000d\u000a\u0009Node[3].Distance := Node[2].Distance;\u000d\u000a\u0009Node[3].Phase := Node[2].Phase + Deg_Wait_End;\u000d\u000a\u0009Node[3].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000aELSE\u000d\u000a\u0009\/\/ Reset return only order\u000d\u000a\u0009OnlyReturn := FALSE;\u000d\u000a\u0009\u000d\u000a\u0009\/\/ 0: Node for creating a starting ramp befor moving to opposite side\u000d\u000a\u0009Node[0].Distance := 0;\u000d\u000a\u0009Node[0].Phase := 1;\u000d\u000a\u0009Node[0].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000a\u000d\u000a\u0009\/\/ 2: Node for the end of moving to opposite side\u000d\u000a\u0009Node[2].Distance := 0;\u000d\u000a\u0009Node[2].Phase := 3;\u000d\u000a\u0009Node[2].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000a\u000d\u000a\u0009\/\/ 1: Node for creating a stopping ramp befor waiting in opposite side\u000d\u000a\u0009Node[1].Distance := 0;\u000d\u000a\u0009Node[1].Phase := 2;\u000d\u000a\u0009Node[1].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000a\u000d\u000a\u0009\/\/ 3: Node for waiting in opposite side\u000d\u000a\u0009Node[3].Distance := 0;\u000d\u000a\u0009Node[3].Phase := 4;\u000d\u000a\u0009Node[3].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u0009\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ 4: Node for creating a starting ramp befor moving to motor side\u000d\u000aNode[4].Distance := Node[2].Distance - Stop_Dist; \/\/ (Pitch\/2);\u000d\u000aNode[4].Phase := Node[3].Phase + Stop_Angle; \/\/ 360;\u000d\u000aNode[4].Curve := _eMC_CAM_CURVE#_mcPolynomic5;\u000d\u000a\u000d\u000a\/\/ 6: Node for the end of moving to motor side\u000d\u000aNode[6].Distance := Pos_End;\u000d\u000aNode[6].Phase := Node[3].Phase + (Travel_Distance_Neg * 360 \/ Pitch);\u000d\u000aNode[6].Curve := _eMC_CAM_CURVE#_mcPolynomic5;\u000d\u000a\u000d\u000a\/\/ 5: Node for creating a stopping ramp befor waiting in motor side\u000d\u000aNode[5].Distance := Node[6].Distance + Stop_Dist; \/\/ (Pitch\/2);\u000d\u000aNode[5].Phase := Node[6].Phase - Stop_Angle; \/\/ 360;\u000d\u000aNode[5].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000a\u000d\u000a\/\/ 7: Node for waiting in motor side\u000d\u000aNode[7].Distance := Node[6].Distance;\u000d\u000aNode[7].Phase := Node[6].Phase + Deg_Wait_Start;\u000d\u000aNode[7].Curve := _eMC_CAM_CURVE#_mcStraightLine;\u000d\u000a\u000d\u000a\/\/ Set other cam parameter\u000d\u000aFOR i := 0 TO 7 Do\u000d\u000a\u0009Node[i].ConnectingVelEnable := FALSE;\u000d\u000a\u0009Node[i].ConnectingVel := REAL#0.000;\u000d\u000a\u0009Node[i].ConnectingAccEnable := FALSE;\u000d\u000a\u0009Node[i].ConnectingAcc := REAL#0.000;\u000d\u000a\u0009\/\/Node[i].PhasePitch :=10;\u000d\u000aEND_FOR ;\u000d\u000a\u000d\u000a\/\/ Define phase pitch\u000d\u000aNode[0].PhasePitch := Node[0].Phase \/ 20;\u000d\u000aNode[1].PhasePitch := (Node[1].Phase - Node[0].Phase) \/ 5;\u000d\u000aNode[2].PhasePitch := (Node[2].Phase - Node[1].Phase) \/ 20;\u000d\u000aNode[3].PhasePitch := (Node[3].Phase - Node[2].Phase) \/ 5;\u000d\u000aNode[4].PhasePitch := (Node[4].Phase - Node[3].Phase) \/ 20;\u000d\u000aNode[5].PhasePitch := (Node[5].Phase - Node[4].Phase) \/ 5;\u000d\u000aNode[6].PhasePitch := (Node[6].Phase - Node[5].Phase) \/ 20;\u000d\u000aNode[7].PhasePitch := (Node[7].Phase - Node[6].Phase) \/ 5;\u000d\u000a\u000d\u000aValues_Changes := FALSE;\u000d\u000aWriteCamDefinitionDone := TRUE;","W":946,"X":2}],"CMT":"Cam parameters","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":2},{"Ix":8,"X":2,"Y":1},{"Ix":8,"X":2,"Y":2},{"Ix":9,"X":1}]}
{"CLs":[{"__type":"LD","Var":"WriteCamDefinitionDone"},{"__type":"LD","Ix":1,"Not":true,"Var":"Cam_Start.Busy","X":1},{"__type":"LD","Ix":2,"Var":"Cam_Stop.Done","X":2},{"__type":"LD","Id":"620493bd-2e32-4801-acc8-2e7200000063","Ix":3,"Up":true,"Var":"Execute","X":1,"Y":1},{"__type":"LD","Dwn":true,"Id":"620493bd-2e32-4801-acc8-2e7200000065","Ix":5,"Var":"Pause_Run","X":1,"Y":2},{"__type":"LD","Ix":4,"Var":"test","Y":3},{"__type":"HL","X":2,"Y":1},{"__type":"HL","X":2,"Y":2},{"__type":"HL","X":1,"Y":3},{"__type":"HL","X":2,"Y":3},{"__type":"FB","In":[{"__type":"PRM","Arg":"CamTable","IO":true,"Ix":8,"Type":"ARRAY[0..N] OF _sMC_CAM_REF","Var":"Tranquanage"},{"__type":"PRM","Arg":"CamProperty","IO":true,"Ix":9,"Type":"_sMC_CAM_PROPERTY","Var":"CamProperty"},{"__type":"PRM","Arg":"CamNodes","IO":true,"Ix":10,"Type":"ARRAY[0..N] OF _sMC_CAM_NODE","Var":"Node"},{"__type":"PF","Arg":"Execute"}],"Ix":21,"Name":"MC_GenerateCamTable","Out":[{"__type":"PRM","Arg":"CamTable","IO":true,"Ix":11,"Type":"ARRAY[0..N] OF _sMC_CAM_REF","Var":"Tranquanage"},{"__type":"PRM","Arg":"CamProperty","IO":true,"Ix":12,"Type":"_sMC_CAM_PROPERTY","Var":"CamProperty"},{"__type":"PRM","Arg":"CamNodes","IO":true,"Ix":13,"Type":"ARRAY[0..N] OF _sMC_CAM_NODE","Var":"Node"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"EndPointIndex","Ix":14,"Type":"UINT","Var":"EndOfCam"},{"__type":"PRM","Arg":"Busy","Ix":15,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":16,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":17,"Type":"BOOL","Var":"VIew_Error"},{"__type":"PRM","Arg":"ErrorID","Ix":18,"Type":"WORD","Var":"View_ErrorID"},{"__type":"PRM","Arg":"ErrorParameterCode","Ix":19,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ErrorNodePointIndex","Ix":20,"Type":"UINT","Var":""}],"X":3,"Var":"Cam_Generate"},{"__type":"ST","Ix":7,"RS":true,"Var":"WriteCamDefinitionDone","X":4},{"__type":"ST","Ix":6,"S":true,"Var":"CamGenerationDone","X":5}],"CMT":"Cam generation","LRI":22,"RRI":23,"VLs":[{"Ix":24,"X":3},{"Ix":24,"X":3,"Y":1},{"Ix":24,"X":3,"Y":2},{"Ix":25,"X":1},{"Ix":25,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Execute"},{"__type":"LD","Id":"620493bd-2e32-4801-acc8-2e720000007c","Ix":1,"Up":true,"Var":"CamGenerationDone","X":1},{"__type":"LD","Ix":2,"Var":"CamStart_MasterPos_modified","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"CamStart_MasterPos"}],"Ix":8,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"Cam_StartPos"}],"X":3},{"__type":"LD","Ix":3,"Not":true,"Var":"CamStart_MasterPos_modified","X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY","Var":"Master.Act.Pos"}],"Ix":9,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":7,"Type":"ANY","Var":"Cam_StartPos"}],"X":3,"Y":1}],"CMT":"Define the cam starting position\u000d\u000aUse the value passed to the FB (if the value is differeent from default -3333.333)\u000d\u000aOR\u000d\u000aCompute the start value based on the actual speed and cycletime","LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":2}]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"Execute"},{"__type":"LD","Ix":3,"Not":true,"Var":"Pause_Run","X":1},{"__type":"LD","Var":"CamGenerationDone","X":2},{"__type":"LD","Ix":2,"Var":"test_CamIN","Y":1},{"__type":"HL","X":1,"Y":1},{"__type":"HL","X":2,"Y":1},{"__type":"FB","In":[{"__type":"PRM","Arg":"Master","IO":true,"Ix":5,"Type":"_sAXIS_REF","Var":"Master"},{"__type":"PRM","Arg":"Slave","IO":true,"Ix":6,"Type":"_sAXIS_REF","Var":"Slave"},{"__type":"PRM","Arg":"CamTable","IO":true,"Ix":7,"Type":"ARRAY[0..N] OF _sMC_CAM_REF","Var":"Tranquanage"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Periodic","Ix":8,"Type":"BOOL","Var":"True"},{"__type":"PRM","Arg":"StartMode","Ix":9,"Type":"_eMC_START_MODE","Var":""},{"__type":"PRM","Arg":"StartPosition","Ix":10,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"MasterStartDistance","Ix":11,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"MasterScaling","Ix":12,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"SlaveScaling","Ix":13,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"MasterOffset","Ix":14,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"SlaveOffset","Ix":15,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"ReferenceType","Ix":16,"Type":"_eMC_REFERENCE_TYPE","Var":""},{"__type":"PRM","Arg":"Direction","Ix":17,"Type":"_eMC_DIRECTION","Var":""},{"__type":"PRM","Arg":"CamTransition","Ix":18,"Type":"_eMC_CAM_TRANSITION","Var":""},{"__type":"PRM","Arg":"BufferMode","Ix":19,"Type":"_eMC_BUFFER_MODE","Var":"_eMC_BUFFER_MODE#_mcBuffered"}],"Ix":31,"Name":"MC_CamIn","Out":[{"__type":"PRM","Arg":"Master","IO":true,"Ix":20,"Type":"_sAXIS_REF","Var":"Master"},{"__type":"PRM","Arg":"Slave","IO":true,"Ix":21,"Type":"_sAXIS_REF","Var":"Slave"},{"__type":"PRM","Arg":"CamTable","IO":true,"Ix":22,"Type":"ARRAY[0..N] OF _sMC_CAM_REF","Var":"Tranquanage"},{"__type":"PF","Arg":"InCam"},{"__type":"PRM","Arg":"InSync","Ix":23,"Type":"BOOL","Var":"Cam_Sync"},{"__type":"PRM","Arg":"EndOfProfile","Ix":24,"Type":"BOOL","Var":"Cam_EoP"},{"__type":"PRM","Arg":"Index","Ix":25,"Type":"UINT","Var":"Cam_Index"},{"__type":"PRM","Arg":"Busy","Ix":26,"Type":"BOOL","Var":"Cam_Busy"},{"__type":"PRM","Arg":"Active","Ix":27,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":28,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":29,"Type":"BOOL","Var":"e_Cam"},{"__type":"PRM","Arg":"ErrorID","Ix":30,"Type":"WORD","Var":"e_Id"}],"X":3,"Var":"Cam_Start"},{"__type":"ST","Ix":4,"RS":true,"Var":"CamGenerationDone","X":4}],"CMT":"Start and execute cam","LRI":32,"RRI":33,"VLs":[{"Ix":34,"X":3}]}
{"CLs":[{"__type":"LD","Var":"Cam_Busy"},{"__type":"ST","Ix":1,"Var":"InTraversing","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Cam_Index"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"UINT#50"}],"Ix":8,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1,"PL":true},{"__type":"ST","Ix":2,"Var":"ToOpposite","X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":6,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Cam_Index"},{"__type":"PRM","Arg":"In2","Ix":7,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"UINT#50"}],"Ix":9,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":2,"PL":true},{"__type":"ST","Ix":3,"Var":"ToReference","X":2,"Y":2},{"__type":"HL","X":2}],"CMT":"In tranquanage must come from the busy state because the cam need to start to have InCam","LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":1},{"Ix":12,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Values_Changes"},{"__type":"LD","Ix":2,"Var":"FirstCam_WithOffset","Y":1},{"__type":"LD","Ix":1,"Var":"Cam_Start.EndOfProfile","X":1},{"__type":"LD","Id":"620493bd-2e32-4801-acc8-2e72000000c3","Ix":8,"Up":true,"Var":"Pause_Run","Y":2},{"__type":"LD","Ix":3,"Not":true,"Var":"Execute","Y":3},{"__type":"LD","Ix":5,"Var":"Cam_Start.Busy","X":1,"Y":3},{"__type":"LD","Ix":4,"Not":true,"Var":"Cam_Stop.Done","X":2,"Y":3},{"__type":"LD","Ix":6,"Not":true,"Var":"test_CamIN","X":3,"Y":3},{"__type":"LD","Ix":7,"Not":true,"Var":"test_LockStop","X":4,"Y":3},{"__type":"HL","X":2},{"__type":"HL","X":3},{"__type":"HL","X":4},{"__type":"HL","X":1,"Y":2},{"__type":"HL","X":2,"Y":2},{"__type":"HL","X":3,"Y":2},{"__type":"HL","X":4,"Y":2},{"__type":"FB","In":[{"__type":"PRM","Arg":"Slave","IO":true,"Ix":10,"Type":"_sAXIS_REF","Var":"Slave"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Deceleration","Ix":11,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"Jerk","Ix":12,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"OutMode","Ix":13,"Type":"_eMC_OUT_MODE","Var":""}],"Ix":19,"Name":"MC_CamOut","Out":[{"__type":"PRM","Arg":"Slave","IO":true,"Ix":14,"Type":"_sAXIS_REF","Var":"Slave"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":15,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":16,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":17,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":18,"Type":"WORD","Var":""}],"X":5,"Var":"Cam_Stop"},{"__type":"ST","Ix":9,"RS":true,"Var":"CamGenerationDone","X":6}],"CMT":"Stop cam","LRI":20,"RRI":21,"VLs":[{"Ix":22,"X":5},{"Ix":22,"X":5,"Y":1},{"Ix":22,"X":5,"Y":2},{"Ix":23,"X":1}]}
{"CLs":[{"__type":"LD","Not":true,"Var":"Execute"},{"__type":"LD","Ix":1,"Not":true,"Var":"Cam_Stop.Busy","X":1},{"__type":"ST","Ix":3,"RS":true,"Var":"WriteCamDefinitionDone","X":2},{"__type":"ST","Ix":4,"RS":true,"Var":"Pause_Run","X":3},{"__type":"ST","Ix":2,"RS":true,"Var":"CamGenerationDone","X":4}],"LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"WriteCamDefinitionDone"},{"__type":"LD","Ix":1,"Var":"Cam_EoP","Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_NUM","Var":"Node[7].Phase"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_NUM","Var":"REAL#360"}],"Ix":7,"Name":"\/","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":6,"Type":"ANY_NUM","Var":"Nb_TurnByProfil"}],"X":1},{"__type":"LD","Ix":2,"Var":"Cam_EoP","X":2},{"__type":"ST","Ix":3,"Var":"EndOfProfil","X":3}],"CMT":"Number of turn by cam cycle","LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":1}]}
