{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Index"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"SINT#0"}],"Ix":7,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Index"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"SINT#5"}],"Ix":8,"Name":"<=","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"ST","Ix":1,"Var":"ENO","X":3},{"__type":"ST","Ix":2,"Var":"Mgr.Machines[Index].Used","X":3,"Y":1}],"CMT":" ______________________________________________________________________________________________________\u000a¦  Machine is used                                                                                                                               ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aIf local machine is used and index correctly selected","LRI":9,"RRI":10,"VLs":[{"Ix":11,"X":3}]}
{"CLs":[{"__type":"LD","Var":"ENO"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"Sysmetric_S.Accumulator_Material_1"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"Weight_Old"}],"Ix":3,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1},{"__type":"IST","EID":"91f6734f-bdd8-4d38-8856-83f0d4b76933","H":200.99999999999989,"Ix":4,"TXT":"\/\/ Sum of weight\u000d\u000aWeight_Sum := Sysmetric_S.Accumulator_Material_1 + Sysmetric_S.Accumulator_Material_2 + Sysmetric_S.Accumulator_Material_3 + Sysmetric_S.Accumulator_Material_4 + Sysmetric_S.Accumulator_Material_5;\u000d\u000a\u000d\u000a\/\/ Convert for manager\u000d\u000aMgr.Machines[Index].Material := UDINT_TO_REAL( Weight_Sum ) \/ REAL#1000;\u000d\u000a\u000d\u000a\/\/ Backup\u000d\u000aWeight_Old := Sysmetric_S.Accumulator_Material_1;","W":887,"X":2}],"CMT":"_______________________________________________________________________________________________________\u000a¦  Local value computation                                                                                                                 ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aWeight","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"ENO"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"Sysmetric_S.Actual_Product_Weight"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"Consumption_Old"}],"Ix":5,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"Mgr.Machines[Index].Consumption_Factor"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"Factor_Old"}],"Ix":6,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1},{"__type":"IST","EID":"91d168f0-c0d7-4e93-8ad5-e52461f46dcf","H":330.99999999999989,"Ix":7,"TXT":"\/\/ Check if value is infinit\u000d\u000aIF Sysmetric_S.Actual_Product_Weight = 9999 THEN\u000d\u000a\u0009\/\/ Put infinit as output\u000d\u000a\u0009Mgr.Machines[Index].Consumption := REAL#3e+38 + REAL#3e+38;\u000d\u000aELSE\u000d\u000a\u0009\/\/ Convert the consumption\u000d\u000a\u0009Consumption_Work := INT_TO_REAL( Sysmetric_S.Actual_Product_Weight ) \/ REAL#100;\u000d\u000a\u000d\u000a\u0009\/\/ Add correction factor\u000d\u000a\u0009Mgr.Machines[Index].Consumption := Consumption_Work * (1 + (Mgr.Machines[Index].Consumption_Factor \/ 100) );\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Backup\u000d\u000aConsumption_Old := Sysmetric_S.Actual_Product_Weight;\u000d\u000aFactor_Old := Mgr.Machines[Index].Consumption_Factor;","W":849,"X":2}],"CMT":"Consumption","LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":1},{"Ix":11,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":1,"Var":"Extruder.S.Sta.Machine_On","X":1},{"__type":"ST","Ix":4,"Var":"Sysmetric_R.Cmd.Extruder_On","X":2},{"__type":"LD","Ix":2,"Not":true,"Var":"Sysmetric_R.Cmd.Selection","X":1,"Y":1},{"__type":"LD","Dwn":true,"Id":"94e24027-2104-42cc-97b2-70d900000027","Ix":3,"Var":"Extruder.S.Sta.Machine_On","X":1,"Y":2},{"__type":"ST","Ix":7,"RS":true,"Var":"Sysmetric_R.Cmd.Automatique","X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":8,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Line_Speed"},{"__type":"PRM","Arg":"In2","Ix":9,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"+0.01"}],"Ix":10,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":3,"PL":true},{"__type":"ST","Ix":5,"Var":"Sysmetric_R.Cmd.DrawOff_On","X":2,"Y":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"}],"Ix":11,"Name":"Get1sClk","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":4},{"__type":"ST","Ix":6,"Var":"Sysmetric_R.Cmd.Line_Flag1Hz","X":2,"Y":4}],"CMT":" ______________________________________________________________________________________________________\u000a¦  Send data to sysmetric                                                                                                                    ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aCommand","LRI":12,"RRI":13,"VLs":[{"Ix":14,"X":1},{"Ix":14,"X":1,"Y":1},{"Ix":14,"X":1,"Y":2},{"Ix":14,"X":1,"Y":3},{"Ix":15,"X":2,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"IST","EID":"4ecbf667-78d1-41b0-a8b2-909796e17ca2","H":163.99999999999994,"Ix":1,"TXT":"\/\/ Convert extruder speed in 0..4000\u000d\u000aSpeed_Analog := Extruder.S.Extruder_Command * 4000 \/ Extruder.S.Extruder_MaxSpeed;\u000d\u000aSysmetric_R.Exu_Speed  := REAL_TO_INT(Speed_Analog);\u000d\u000a\u000d\u000a\/\/ Convert line speed in [0.1 m\/min]\u000d\u000aSysmetric_R.Line_Speed := REAL_TO_INT(Line_Speed * 10);","W":956,"X":1}],"CMT":"Setpoints","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":1,"Var":"Sysmetric_S.Sta.Automatique","X":1},{"__type":"IST","EID":"9ab219da-d657-44ac-a5df-eb26333af6dc","H":103,"Ix":3,"TXT":"\/\/ Convert sysmetric speed in overspeed\u000d\u000aExtruder.S.Extruder_Overspeed := (Sysmetric_S.Extruder_Speed - Speed_Analog) \/ Speed_Analog * 100;","W":952.00000000000023,"X":2},{"__type":"ST","Ix":2,"Var":"Extruder.S.Sta.Automatic","X":2,"Y":1}],"CMT":" ______________________________________________________________________________________________________\u000a¦  Receive data from sysmetric                                                                                                           ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aGive order to extruder","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":2}]}
{"CLs":[{"__type":"LD","Var":"ENO"},{"__type":"LD","Ix":1,"Not":true,"Var":"Local_ES","X":1},{"__type":"LD","Ix":2,"Var":"Sysmetric_S.Msg.EmergencyStop","X":1,"Y":1},{"__type":"LD","Ix":26,"Var":"Sysmetric_S.Msg.ES_Dosing","X":1,"Y":2},{"__type":"ST","Ix":39,"Var":"Sta.EmergencyStop","X":2},{"__type":"LD","Ix":3,"Var":"P_Off","X":1,"Y":3},{"__type":"ST","Ix":40,"Var":"Sta.FastStop","X":2,"Y":3},{"__type":"ST","Ix":41,"Var":"Sta.Activated","X":1,"Y":4},{"__type":"LD","Ix":4,"Var":"Sysmetric_S.Sta.Selected","X":1,"Y":5},{"__type":"ST","Ix":42,"Var":"Sta.Selected","X":2,"Y":5},{"__type":"LD","Ix":5,"Var":"Sysmetric_S.Sta.Machine_On","X":1,"Y":6},{"__type":"ST","Ix":43,"Var":"Sta.Machine_On","X":2,"Y":6},{"__type":"LD","Ix":6,"Var":"Sysmetric_S.Sta.Machine_Off","X":1,"Y":7},{"__type":"ST","Ix":44,"Var":"Sta.Machine_Off","X":2,"Y":7},{"__type":"LD","Ix":7,"Var":"NetworkFault","X":1,"Y":8},{"__type":"ST","Ix":45,"Var":"Sta.Comm_Hardware_Fault","X":2,"Y":8},{"__type":"LD","Ix":8,"Var":"Sysmetric_S.Msg.Pump_OverLoad","X":1,"Y":9},{"__type":"LD","Ix":9,"Var":"Sysmetric_S.Msg.OpenCircuit","X":1,"Y":10},{"__type":"LD","Ix":10,"Var":"Sysmetric_S.Msg.ShortCircuit","X":1,"Y":11},{"__type":"ST","Ix":46,"Var":"Sta.Machine_Fault","X":2,"Y":9},{"__type":"LD","Ix":11,"Var":"Sysmetric_S.Msg.NoFlow","X":1,"Y":12},{"__type":"LD","Ix":27,"Var":"Sysmetric_S.Msg.NoFlow_1","X":1,"Y":13},{"__type":"LD","Ix":12,"Var":"Sysmetric_S.Msg.NoFlow_2","X":1,"Y":14},{"__type":"LD","Ix":13,"Var":"Sysmetric_S.Msg.NoFlow_3","X":1,"Y":15},{"__type":"LD","Ix":14,"Var":"Sysmetric_S.Msg.NoFlow_4","X":1,"Y":16},{"__type":"LD","Ix":15,"Var":"Sysmetric_S.Msg.NoFlow_5","X":1,"Y":17},{"__type":"LD","Ix":16,"Var":"Sysmetric_S.Msg.ScrewCapacity_OutOfRange","X":1,"Y":18},{"__type":"LD","Ix":28,"Var":"Sysmetric_S.Msg.BatteryLow","X":1,"Y":19},{"__type":"LD","Ix":29,"Var":"Sysmetric_S.Msg.Formula_Not_Replaced","X":1,"Y":20},{"__type":"LD","Ix":30,"Var":"Sysmetric_S.Msg.Material_Leak","X":1,"Y":21},{"__type":"LD","Ix":31,"Var":"Sysmetric_S.Msg.Mixer_NotRotating","X":1,"Y":22},{"__type":"LD","Ix":32,"Var":"Sysmetric_S.Msg.SD_TooHigh","X":1,"Y":23},{"__type":"LD","Ix":33,"Var":"Sysmetric_S.Msg.Vibrator_NoResponse","X":1,"Y":24},{"__type":"LD","Ix":34,"Var":"Sysmetric_S.Msg.Weighting_Error","X":1,"Y":25},{"__type":"ST","Ix":47,"Var":"Sta.Machine_Warning","X":2,"Y":12},{"__type":"LD","Ix":17,"Var":"P_Off","X":1,"Y":26},{"__type":"ST","Ix":48,"Var":"Sta.AirFault","X":2,"Y":26},{"__type":"LD","Ix":18,"Var":"Sysmetric_S.Msg.HopperEmpty","X":1,"Y":27},{"__type":"LD","Ix":19,"Var":"Sysmetric_S.Msg.BadConveying_1","X":1,"Y":28},{"__type":"LD","Ix":20,"Var":"Sysmetric_S.Msg.BadConveying_2","X":1,"Y":29},{"__type":"LD","Ix":21,"Var":"Sysmetric_S.Msg.BadConveying_3","X":1,"Y":30},{"__type":"LD","Ix":22,"Var":"Sysmetric_S.Msg.BadConveying_4","X":1,"Y":31},{"__type":"LD","Ix":23,"Var":"Sysmetric_S.Msg.BadConveying_5","X":1,"Y":32},{"__type":"LD","Ix":35,"Var":"Sysmetric_S.Msg.NoMaterial","X":1,"Y":33},{"__type":"LD","Ix":36,"Var":"Sysmetric_S.Msg.Bucket_Empty","X":1,"Y":34},{"__type":"LD","Ix":37,"Var":"Sysmetric_S.Msg.LowMaterial","X":1,"Y":35},{"__type":"ST","Ix":49,"Var":"Sta.Material_Shortage","X":2,"Y":27},{"__type":"LD","Ix":24,"Var":"Sysmetric_S.Sta.Machine_Off","X":1,"Y":36},{"__type":"LD","Ix":38,"Var":"Sysmetric_S.Msg.Graviman_NotAuto","X":1,"Y":37},{"__type":"ST","Ix":50,"Var":"Sta.Maintenance_Requested","X":2,"Y":36},{"__type":"LD","Ix":25,"Var":"T_1s","X":1,"Y":38},{"__type":"ST","Ix":51,"Var":"Sta.Update","X":2,"Y":38},{"__type":"HL","X":2,"Y":4}],"CMT":"_______________________________________________________________________________________________________\u000a¦  Status generation                                                                                                                            ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aIf local machine is used and index correctly selected","LRI":52,"RRI":53,"VLs":[{"Ix":54,"X":2},{"Ix":54,"X":2,"Y":1},{"Ix":55,"X":2,"Y":9},{"Ix":55,"X":2,"Y":10},{"Ix":56,"X":2,"Y":12},{"Ix":56,"X":2,"Y":13},{"Ix":56,"X":2,"Y":14},{"Ix":56,"X":2,"Y":15},{"Ix":56,"X":2,"Y":16},{"Ix":56,"X":2,"Y":17},{"Ix":56,"X":2,"Y":18},{"Ix":56,"X":2,"Y":19},{"Ix":56,"X":2,"Y":20},{"Ix":56,"X":2,"Y":21},{"Ix":56,"X":2,"Y":22},{"Ix":56,"X":2,"Y":23},{"Ix":56,"X":2,"Y":24},{"Ix":57,"X":2,"Y":27},{"Ix":57,"X":2,"Y":28},{"Ix":57,"X":2,"Y":29},{"Ix":57,"X":2,"Y":30},{"Ix":57,"X":2,"Y":31},{"Ix":57,"X":2,"Y":32},{"Ix":57,"X":2,"Y":33},{"Ix":57,"X":2,"Y":34},{"Ix":58,"X":1},{"Ix":58,"X":1,"Y":1},{"Ix":58,"X":1,"Y":2},{"Ix":58,"X":1,"Y":3},{"Ix":58,"X":1,"Y":4},{"Ix":58,"X":1,"Y":5},{"Ix":58,"X":1,"Y":6},{"Ix":58,"X":1,"Y":7},{"Ix":58,"X":1,"Y":8},{"Ix":58,"X":1,"Y":9},{"Ix":58,"X":1,"Y":10},{"Ix":58,"X":1,"Y":11},{"Ix":58,"X":1,"Y":12},{"Ix":58,"X":1,"Y":13},{"Ix":58,"X":1,"Y":14},{"Ix":58,"X":1,"Y":15},{"Ix":58,"X":1,"Y":16},{"Ix":58,"X":1,"Y":17},{"Ix":58,"X":1,"Y":18},{"Ix":58,"X":1,"Y":19},{"Ix":58,"X":1,"Y":20},{"Ix":58,"X":1,"Y":21},{"Ix":58,"X":1,"Y":22},{"Ix":58,"X":1,"Y":23},{"Ix":58,"X":1,"Y":24},{"Ix":58,"X":1,"Y":25},{"Ix":58,"X":1,"Y":26},{"Ix":58,"X":1,"Y":27},{"Ix":58,"X":1,"Y":28},{"Ix":58,"X":1,"Y":29},{"Ix":58,"X":1,"Y":30},{"Ix":58,"X":1,"Y":31},{"Ix":58,"X":1,"Y":32},{"Ix":58,"X":1,"Y":33},{"Ix":58,"X":1,"Y":34},{"Ix":58,"X":1,"Y":35},{"Ix":58,"X":1,"Y":36},{"Ix":58,"X":1,"Y":37},{"Ix":59,"X":2,"Y":36}]}
