{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"LD","Id":"4e5cbeca-3d98-4203-911a-0bb6a4736259","Ix":2,"Up":true,"Var":"mySAV.Cmd.UpdateCode","Y":1},{"__type":"LD","Id":"b348a5f5-619a-466c-9f5b-51432e5d8465","Ix":1,"Up":true,"Var":"mySAV.Sta.Popup_Done","Y":2},{"__type":"IST","EID":"49e35ebb-bcb0-4e63-aa2f-f1fd4791c403","H":348,"Ix":3,"TXT":"\/\/ Init first time if empty\u000d\u000aIF Date_Maint = DT#1970-1-1-0:0:0 THEN\u000d\u000a\u0009Date_Maint := ADD_DT_TIME( GetTime(), T#400d);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Generate new code\u000d\u000aRand_Seed := ULINT_TO_UINT(mySAV.Code);\u000d\u000aRand_Instance(TRUE, Rand_Seed, Rand_Val);\u000d\u000a\u000d\u000a\/\/ Get 9 digits\u000d\u000aRand_Val := Rand_Val * LREAL#1000000000;\u000d\u000a\u000d\u000a\/\/ Save code\u000d\u000amySAV.Code := LREAL_TO_ULINT(Rand_Val);\u000d\u000a\u000d\u000a\/\/ Reset command for new code\u000d\u000amySAV.Cmd.UpdateCode := FALSE;","W":655.99999999999989,"X":1}],"CMT":"Init value","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":1},{"Ix":6,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"mySAV.Cmd.Done"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"}],"Ix":11,"Name":"GetTime","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":6,"Type":"DATE_AND_TIME","Var":"Date_Maint"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"DATE_AND_TIME","Var":"Date_Maint"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"TIME","Var":"T#365d"}],"Ix":10,"Name":"ADD_DT_TIME","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":5,"Type":"DATE_AND_TIME","Var":"Date_Maint"}],"X":2},{"__type":"ST","Ix":1,"RS":true,"Var":"mySAV.Cmd.Done","X":3},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":7,"Type":"TIME","Var":"T#3s"}],"Ix":9,"Name":"TOF","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":8,"Type":"TIME","Var":""}],"X":3,"Y":1,"Var":"LT_PopDone"},{"__type":"ST","Ix":2,"Var":"mySAV.Sta.Popup_Done","X":4,"Y":1},{"__type":"HL","X":4}],"CMT":"Reset time after confirmation","LRI":12,"RRI":13,"VLs":[{"Ix":14,"X":3}]}
{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"LD","Id":"278bf1e6-a401-4c93-b5cf-21c09671282d","Ix":1,"Up":true,"Var":"mySAV.Sta.Popup_Done","Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"DATE_AND_TIME","Var":"Date_Maint"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"TIME","Var":"T#30d"}],"Ix":8,"Name":"SUB_DT_TIME","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":4,"Type":"DATE_AND_TIME","Var":"Date_Month1"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"DATE_AND_TIME","Var":"Date_Month1"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"TIME","Var":"T#30d"}],"Ix":9,"Name":"SUB_DT_TIME","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":7,"Type":"DATE_AND_TIME","Var":"Date_Month2"}],"X":2}],"CMT":" ______________________________________________________________________________________________________\u000a¦   Popup management                                                                                                                       ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aTime computation","LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":1}]}
{"CLs":[{"__type":"F","In":[{"__type":"PF","Arg":"EN"}],"Name":"Get1minClk","Out":[{"__type":"PF","Arg":""}]},{"__type":"F","In":[{"__type":"PF","Arg":"In"}],"Ix":1,"Name":"Down","Out":[{"__type":"PF","Arg":""}],"X":1,"Id":"38611b97-7cbf-4b5f-9dac-60aa00000029"},{"__type":"IST","EID":"9f03a242-ae8c-4c22-a7d4-3272240065fb","H":564.99999999999989,"Ix":2,"TXT":"\/\/ Get current date\u000d\u000aDate_Now := GetTime();\u000d\u000a\u000d\u000a\/\/ Check for maintenance now\u000d\u000aIF Date_Now >= Date_Maint THEN\u000d\u000a\u0009\/\/ Set maint now\u000d\u000a\u0009mySAV.Sta.Maint_Need := TRUE;\u000d\u000a\u0009mySAV.Sta.Maint_1month := FALSE;\u000d\u000a\u0009mySAV.Sta.Maint_2month := FALSE;\u000d\u000a\u000d\u000a\/\/ Check for maintenance 1 month befor\u000d\u000aELSIF Date_Now >= Date_Month1 THEN\u000d\u000a\u0009mySAV.Sta.Maint_Need := FALSE;\u000d\u000a\u0009mySAV.Sta.Maint_1month := TRUE;\u000d\u000a\u0009mySAV.Sta.Maint_2month := FALSE;\u000d\u000a\u0009\u000d\u000a\/\/ Check for maintenance 2 month befor\u000d\u000aELSIF Date_Now >= Date_Month2 THEN\u000d\u000a\u0009mySAV.Sta.Maint_Need := FALSE;\u000d\u000a\u0009mySAV.Sta.Maint_1month := FALSE;\u000d\u000a\u0009mySAV.Sta.Maint_2month := TRUE;\u000d\u000a\u000d\u000a\/\/ No maintenance required\u000d\u000aELSE\u000d\u000a\u0009mySAV.Sta.Maint_Need := FALSE;\u000d\u000a\u0009mySAV.Sta.Maint_1month := FALSE;\u000d\u000a\u0009mySAV.Sta.Maint_2month := FALSE;\u000d\u000aEND_IF;\u0009","W":585,"X":2}],"CMT":"Alarms management","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"LD","Ix":1,"Var":"mySAV.Sta.Maint_1month","X":1},{"__type":"LD","Ix":2,"Var":"mySAV.Sta.Maint_2month","X":1,"Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":14,"Type":"TIME","Var":"T#3s"}],"Ix":22,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":15,"Type":"TIME","Var":""}],"X":2,"Var":"Month_LT"},{"__type":"LD","Ix":3,"Var":"mySAV.Sta.Maint_Need","X":1,"Y":2},{"__type":"LD","Ix":4,"Var":"mySAV.Sta.Maint_1month","X":1,"Y":3},{"__type":"LD","Ix":5,"Var":"mySAV.Sta.Maint_2month","X":1,"Y":4},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":16,"Type":"TIME","Var":"T#5m"}],"Ix":23,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":17,"Type":"TIME","Var":""}],"X":2,"Y":2,"Var":"Startup_Wait"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":18,"Type":"TIME","Var":"T#3s"}],"Ix":24,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":19,"Type":"TIME","Var":""}],"X":3,"Y":2,"Var":"Startup_LT"},{"__type":"LD","Ix":6,"Var":"mySAV.Sta.Maint_Need","X":1,"Y":5},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":9,"Type":"TIME","Var":"T#12h"},{"__type":"PRM","Arg":"Reset","Ix":10,"Type":"BOOL","Var":"mySAV.Sta.Popup_Request"}],"Ix":20,"Name":"AccumulationTimer","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":11,"Type":"TIME","Var":""}],"X":2,"Y":5,"Var":"Cyclic_Timer"},{"__type":"LD","Ix":7,"Var":"Test","X":1,"Y":6},{"__type":"HL","X":2,"Y":6},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":12,"Type":"TIME","Var":"T#3s"}],"Ix":21,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":13,"Type":"TIME","Var":""}],"X":3,"Y":5,"Var":"Cyclic_LT"},{"__type":"HL","X":3},{"__type":"ST","Ix":8,"Var":"mySAV.Sta.Popup_Request","X":4}],"CMT":"Open popup","LRI":25,"RRI":26,"VLs":[{"Ix":27,"X":1},{"Ix":27,"X":1,"Y":1},{"Ix":27,"X":1,"Y":2},{"Ix":27,"X":1,"Y":3},{"Ix":27,"X":1,"Y":4},{"Ix":27,"X":1,"Y":5},{"Ix":28,"X":2},{"Ix":29,"X":4},{"Ix":29,"X":4,"Y":1},{"Ix":29,"X":4,"Y":2},{"Ix":29,"X":4,"Y":3},{"Ix":29,"X":4,"Y":4},{"Ix":30,"X":2,"Y":2},{"Ix":30,"X":2,"Y":3},{"Ix":31,"X":3,"Y":5}]}
