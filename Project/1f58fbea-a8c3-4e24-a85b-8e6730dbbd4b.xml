{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"ST","Ix":1,"S":true,"Var":"MyTS.Cfg.DualOutput","X":1}],"CMT":"Config","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"e034e5c0-0db5-4a3d-8e00-800200000007","Up":true,"Var":"MyTS.Enable"},{"__type":"IST","EID":"abab4f0b-09f1-45f8-8b1c-ca792202888d","H":279,"Ix":1,"TXT":"\/\/ Init TS command\u000d\u000aOutput_TS_A := 0;\u000d\u000aOutput_TS_B := 0;\u000d\u000a\u000d\u000a\/\/ Init output command\u000d\u000aIF Invert THEN\u000d\u000a\u0009Output_Cmd_A := TRUE;\u000d\u000a\u0009Output_Cmd_B := FALSE;\u000d\u000aELSE\u000d\u000a\u0009Output_Cmd_A := FALSE;\u000d\u000a\u0009Output_Cmd_B := TRUE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aDir := FALSE;","W":412,"X":1}],"CMT":"_______________________________________________________________________________________________________\u000a¦   Initalizing                                                                                                                                        ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aWhen TS is enabled","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#5"}],"Ix":11,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":3,"Type":"ANY_ELEMENTARY[], ENUM[], STRUCT[]","Var":"MyTS.Switchs[0]"},{"__type":"PRM","Arg":"OutVal","IO":true,"Ix":4,"Type":"ANY_ELEMENTARY, ENUM, STRUCT","Var":"SwitchDone"},{"__type":"PRM","Arg":"Size","Ix":5,"Type":"UINT","Var":"MyTS.Cfg.Size"},{"__type":"PRM","Arg":"Num","IO":true,"Ix":6,"Type":"UINT","Var":"MyTS.Num"}],"Ix":12,"Name":"StackFIFO","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":7,"Type":"ANY_ELEMENTARY[], ENUM[], STRUCT[]","Var":"MyTS.Switchs[0]"},{"__type":"PRM","Arg":"OutVal","IO":true,"Ix":8,"Type":"ANY_ELEMENTARY, ENUM, STRUCT","Var":"SwitchDone"},{"__type":"PRM","Arg":"","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Num","IO":true,"Ix":10,"Type":"UINT","Var":"MyTS.Num"}],"X":2},{"__type":"IST","EID":"4b1592e9-c854-4418-9e0e-5f9337aad268","H":350,"Ix":13,"TXT":"\/\/ Avoid over run on output switch if it's used by another instance\u000d\u000aIF SwitchDone.PosStart > MyTS.Cfg.Modulo THEN\u000d\u000a\u0009SwitchDone.PosStart := SwitchDone.PosStart - MyTS.Cfg.Modulo;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Same for end pos\u000d\u000aIF SwitchDone.PosEnd > MyTS.Cfg.Modulo THEN\u000d\u000a\u0009SwitchDone.PosEnd := SwitchDone.PosEnd - MyTS.Cfg.Modulo;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Finish a switch\u000d\u000aSwitchDone.Stp := USINT#99;\u000d\u000aMyTS.Switchs[0].Stp := USINT#0;\u000d\u000aDone := TRUE;\u000d\u000a\u000d\u000a\/\/ Toggle direction\u000d\u000aDir := NOT Dir;","W":621,"X":3}],"CMT":"_______________________________________________________________________________________________________\u000a¦   Timestamp programming sequence                                                                                              ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aThe upper part is done before to avoid losing a cycle between the end of the old switch and the new one.\u000d\u000a\u000d\u000a5: Clean output swith","LRI":14,"RRI":15,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"MyTS.Enable"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyTS.Num"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"UINT#0"}],"Ix":12,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":6,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":7,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#0"}],"Ix":13,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"LD","Ix":1,"Not":true,"Var":"Dir","X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":8,"Type":"ANY","Var":"USINT#1"}],"Ix":14,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":9,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":4},{"__type":"LD","Ix":2,"Var":"Dir","X":3,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":10,"Type":"ANY","Var":"USINT#3"}],"Ix":15,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":11,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":4,"Y":1},{"__type":"ST","Ix":3,"Var":"Run","X":2,"Y":2},{"__type":"HL","X":3,"Y":2},{"__type":"HL","X":4,"Y":2}],"CMT":"__________________________________________________________________________________________________________________________________\u000d\u000a\u000d\u000aStarting sequence","LRI":16,"RRI":17,"VLs":[{"Ix":18,"X":2},{"Ix":18,"X":2,"Y":1},{"Ix":19,"X":3}]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#1"}],"Ix":3,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"IST","EID":"db4d6e64-6667-4e92-a30b-baef0395c893","H":457,"Ix":4,"TXT":"\/\/ Reset FB status\u000d\u000aDone := FALSE;\u000d\u000a\/\/ResetABit(MyTS.Error, 2);\u000d\u000a\u000d\u000a\/\/ Save status\u000d\u000aMyTS.Switchs[0].Sta.Set_On := TRUE;\u000d\u000aMyTS.Switchs[0].Sta.Set_Off := TRUE;\u000d\u000a\u000d\u000a\/\/ Set timestamp parameters\u000d\u000aOutput_TS_A := MyTS.Switchs[0].TimeStamp.Start;\u000d\u000aOutput_TS_B := MyTS.Switchs[0].TimeStamp.End;\u000d\u000a\u000d\u000a\/\/ Set output command\u000d\u000aIF Invert THEN\u000d\u000a\u0009Output_Cmd_A := FALSE;\u000d\u000a\u0009Output_Cmd_B := TRUE;\u000d\u000aELSE\u000d\u000a\u0009Output_Cmd_A := TRUE;\u000d\u000a\u0009Output_Cmd_B := FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Go to next step\u000d\u000aMyTS.Switchs[0].Stp := USINT#2;","W":705,"X":2}],"CMT":"1: Write order with A rising and B falling","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#2"}],"Ix":13,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"LD","Ix":1,"Not":true,"Var":"MyTS.Switchs[0].Sta.Set_On","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":7,"Type":"ANY","Var":"MyTS.Switchs[0].TimeStamp.Start"}],"Ix":14,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":8,"Type":"ANY","Var":"Output_TS_A"}],"X":3},{"__type":"LD","Ix":2,"Not":true,"Var":"MyTS.Switchs[0].Sta.Set_Off","X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":11,"Type":"ANY","Var":"MyTS.Switchs[0].TimeStamp.End"}],"Ix":17,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":12,"Type":"ANY","Var":"Output_TS_B"}],"X":3,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyTS.Act.TS_Out"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output_TS_B"}],"Ix":15,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":9,"Type":"ANY","Var":"USINT#5"}],"Ix":16,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":10,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":3,"Y":2}],"CMT":"2: Wait and of execution - When B timestamp is down","LRI":18,"RRI":19,"VLs":[{"Ix":20,"X":2},{"Ix":20,"X":2,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#3"}],"Ix":3,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"IST","EID":"4620e7f2-61d7-42de-9352-3af0540b8ec7","H":466,"Ix":4,"TXT":"\/\/ Reset FB status\u000d\u000aDone := FALSE;\u000d\u000a\/\/ResetABit(MyTS.Error, 2);\u000d\u000a\u000d\u000a\/\/ Save status\u000d\u000aMyTS.Switchs[0].Sta.Set_On := TRUE;\u000d\u000aMyTS.Switchs[0].Sta.Set_Off := TRUE;\u000d\u000a\u000d\u000a\/\/ Set timestamp parameters\u000d\u000aOutput_TS_A := MyTS.Switchs[0].TimeStamp.End;\u000d\u000aOutput_TS_B := MyTS.Switchs[0].TimeStamp.Start;\u000d\u000a\u000d\u000a\/\/ Set output command\u000d\u000aIF Invert THEN\u000d\u000a\u0009Output_Cmd_A := TRUE;\u000d\u000a\u0009Output_Cmd_B := FALSE;\u000d\u000aELSE\u000d\u000a\u0009Output_Cmd_A := FALSE;\u000d\u000a\u0009Output_Cmd_B := TRUE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Go to next step\u000d\u000aMyTS.Switchs[0].Stp := USINT#4;","W":496,"X":2}],"CMT":"3: Write order with B rising and A falling","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#4"}],"Ix":13,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"LD","Ix":1,"Not":true,"Var":"MyTS.Switchs[0].Sta.Set_On","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":7,"Type":"ANY","Var":"MyTS.Switchs[0].TimeStamp.Start"}],"Ix":14,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":8,"Type":"ANY","Var":"Output_TS_B"}],"X":3},{"__type":"LD","Ix":2,"Not":true,"Var":"MyTS.Switchs[0].Sta.Set_Off","X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":11,"Type":"ANY","Var":"MyTS.Switchs[0].TimeStamp.End"}],"Ix":17,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":12,"Type":"ANY","Var":"Output_TS_A"}],"X":3,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyTS.Act.TS_Out"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output_TS_A"}],"Ix":15,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":9,"Type":"ANY","Var":"USINT#5"}],"Ix":16,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":10,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":3,"Y":2}],"CMT":"4: Wait and of execution - When A timestamp is down","LRI":18,"RRI":19,"VLs":[{"Ix":20,"X":2},{"Ix":20,"X":2,"Y":1}]}
{"CLs":[{"__type":"LD","Dwn":true,"Id":"e034e5c0-0db5-4a3d-8e00-80020000006e","Var":"MyTS.Enable"},{"__type":"LD","Ix":1,"Var":"P_First_Run","Y":1},{"__type":"IST","EID":"7bd82af0-cfe3-42c8-87ae-f681aa097024","H":321.99999999999983,"Ix":2,"TXT":"\/\/ Clear current step\u000d\u000aMyTS.Switchs[0].Stp := USINT#0;\u000d\u000a\u000d\u000a\/\/ Clear TS command\u000d\u000aOutput_TS_A := 0;\u000d\u000aOutput_TS_B := 0;\u000d\u000a\u000d\u000a\/\/ Clear output command\u000d\u000aIF Invert THEN\u000d\u000a\u0009Output_Cmd_A := TRUE;\u000d\u000a\u0009Output_Cmd_B := TRUE;\u000d\u000aELSE\u000d\u000a\u0009Output_Cmd_A := FALSE;\u000d\u000a\u0009Output_Cmd_B := FALSE;\u000d\u000aEND_IF;","W":563,"X":1}],"CMT":"_______________________________________________________________________________________________________\u000a¦   Cleaning timestamp command                                                                                                      ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aIf TS is not used, reset timestamp output. If the TS command is 0, the state command will be apply","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
