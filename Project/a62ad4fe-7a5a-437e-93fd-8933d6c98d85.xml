{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"ST","Ix":1,"S":true,"Var":"MyTS.Cfg.SingleOutput","X":1}],"CMT":"Config","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#4"}],"Ix":10,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"LD","Ix":1,"Not":true,"Var":"MyTS.Switchs[0].Sta.Set_Off","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"MyTS.Switchs[0].TimeStamp.End"}],"Ix":11,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"Output_TS"}],"X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":6,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyTS.Act.TS_Out"},{"__type":"PRM","Arg":"In2","Ix":7,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output_TS"}],"Ix":12,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":8,"Type":"ANY","Var":"USINT#5"}],"Ix":13,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":9,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":3,"Y":1}],"CMT":"_______________________________________________________________________________________________________\u000a¦   Timestamp programming sequence                                                                                              ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aThe upper part is done before to avoid losing a cycle between the end of the old switch and the new one.\u000d\u000a\u000d\u000a4: Wait Off executed","LRI":14,"RRI":15,"VLs":[{"Ix":16,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#5"}],"Ix":11,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":3,"Type":"ANY_ELEMENTARY[], ENUM[], STRUCT[]","Var":"MyTS.Switchs[0]"},{"__type":"PRM","Arg":"OutVal","IO":true,"Ix":4,"Type":"ANY_ELEMENTARY, ENUM, STRUCT","Var":"SwitchDone"},{"__type":"PRM","Arg":"Size","Ix":5,"Type":"UINT","Var":"MyTS.Cfg.Size"},{"__type":"PRM","Arg":"Num","IO":true,"Ix":6,"Type":"UINT","Var":"MyTS.Num"}],"Ix":12,"Name":"StackFIFO","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":7,"Type":"ANY_ELEMENTARY[], ENUM[], STRUCT[]","Var":"MyTS.Switchs[0]"},{"__type":"PRM","Arg":"OutVal","IO":true,"Ix":8,"Type":"ANY_ELEMENTARY, ENUM, STRUCT","Var":"SwitchDone"},{"__type":"PRM","Arg":"","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Num","IO":true,"Ix":10,"Type":"UINT","Var":"MyTS.Num"}],"X":2},{"__type":"IST","EID":"475ec7de-8485-46f0-9fa6-446acafeeba6","H":285,"Ix":13,"TXT":"\/\/ Avoid over run on output switch if it's used by another instance\u000d\u000aIF SwitchDone.PosStart > MyTS.Cfg.Modulo THEN\u000d\u000a\u0009SwitchDone.PosStart := SwitchDone.PosStart - MyTS.Cfg.Modulo;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Same for end pos\u000d\u000aIF SwitchDone.PosEnd > MyTS.Cfg.Modulo THEN\u000d\u000a\u0009SwitchDone.PosEnd := SwitchDone.PosEnd - MyTS.Cfg.Modulo;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Finish a switch\u000d\u000aSwitchDone.Stp := USINT#99;\u000d\u000aMyTS.Switchs[0].Stp := USINT#0;\u000d\u000aDone := TRUE;","W":813,"X":3}],"CMT":"5: Clean output swith","LRI":14,"RRI":15,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"MyTS.Enable"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyTS.Num"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"UINT#0"}],"Ix":8,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#0"}],"Ix":9,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY","Var":"USINT#1"}],"Ix":10,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":7,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":3},{"__type":"ST","Ix":1,"Var":"Run","X":2,"Y":1},{"__type":"HL","X":3,"Y":1}],"CMT":"__________________________________________________________________________________________________________________________________\u000d\u000a\u000d\u000aStarting sequence","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#1"}],"Ix":3,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"IST","EID":"acb8dee5-22e4-40c3-a598-c425f8c3f3ec","H":293,"Ix":4,"TXT":"\/\/ Reset FB status\u000d\u000aDone := FALSE;\u000d\u000aResetABit(MyTS.Error, 2);\u000d\u000a\u000d\u000a\/\/ Save status\u000d\u000aMyTS.Switchs[0].Sta.Set_On := TRUE;\u000d\u000a\u000d\u000a\/\/ Set timestamp parameters\u000d\u000aOutput_TS := MyTS.Switchs[0].TimeStamp.Start;\u000d\u000aOutput_Cmd := TRUE;\u000d\u000a\u000d\u000a\/\/ Go to next step\u000d\u000aMyTS.Switchs[0].Stp := USINT#2;","W":653,"X":2}],"CMT":"1: Write On order","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#2"}],"Ix":10,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"LD","EC":"Update from compensation","Ix":1,"Not":true,"Var":"MyTS.Switchs[0].Sta.Set_On","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":4,"Type":"ANY","Var":"MyTS.Switchs[0].TimeStamp.Start"}],"Ix":11,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":5,"Type":"ANY","Var":"Output_TS"}],"X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":6,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyTS.Act.TS_Out"},{"__type":"PRM","Arg":"In2","Ix":7,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output_TS"}],"Ix":12,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":8,"Type":"ANY","Var":"USINT#3"}],"Ix":13,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":9,"Type":"ANY","Var":"MyTS.Switchs[0].Stp"}],"X":3,"Y":1}],"CMT":"2: Wait On executed","LRI":14,"RRI":15,"VLs":[{"Ix":16,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Run"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyTS.Switchs[0].Stp"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"USINT#3"}],"Ix":3,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"IST","EID":"ca255659-8ed1-42a2-a037-9d4c14d3288d","H":387,"Ix":4,"TXT":"\/\/ Save status\u000d\u000aMyTS.Switchs[0].Sta.Set_Off := TRUE;\u000d\u000a\u000d\u000a\/\/ Check if the output OFF is doable\u000d\u000aIF MyTS.Switchs[0].TimeStamp.End < MyTS.TSmin THEN\u000d\u000a\u0009 \/\/ Set the minimum value\u000d\u000a\u0009 MyTS.Switchs[0].TimeStamp.End := MyTS.TSmin;\u000d\u000a\u0009 MyTS.Switchs[0].TimeStamp.End_Init := MyTS.TSmin;\u000d\u000a\u0009 SetABit(MyTS.Error, 2);\u000d\u000aELSE\u000d\u000a\u0009 ResetABit(MyTS.Error, 2);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Set timestamp parameters\u000d\u000aOutput_TS := MyTS.Switchs[0].TimeStamp.End;\u000d\u000aOutput_Cmd := FALSE;\u000d\u000a\u000d\u000a\/\/ Go to next step\u000d\u000aMyTS.Switchs[0].Stp := USINT#4;","W":634,"X":2}],"CMT":"3: Write Off order","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Dwn":true,"Id":"98b0b310-67df-44c3-9993-83f30000005b","Var":"MyTS.Enable"},{"__type":"IST","EID":"7bd82af0-cfe3-42c8-87ae-f681aa097024","H":147,"Ix":1,"TXT":"\/\/ Clear current step\u000d\u000aMyTS.Switchs[0].Stp := USINT#0;\u000d\u000a\u000d\u000a\/\/ Clear TS command\u000d\u000aOutput_TS := 0;\u000d\u000aOutput_Cmd := FALSE;","W":503,"X":1}],"CMT":"_______________________________________________________________________________________________________\u000a¦   Cleaning timestamp command                                                                                                      ¦\u000a¦______________________________________________________________________________________________________¦\u000a\u000d\u000aIf TS is not used, reset timestamp output. If the TS command is 0, the state command will be apply","LRI":2,"RRI":3,"VLs":[]}
