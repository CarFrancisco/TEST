{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"LD","Ix":2,"Var":"Enabled","X":1},{"__type":"LD","Ix":3,"Var":"Ramp_On","X":1,"Y":1},{"__type":"ST","Ix":4,"Var":"MyRamp.Enabled","X":2},{"__type":"ST","Ix":5,"Var":"MyRamp.IsUsed","X":1,"Y":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY","Var":"Maximum"}],"Ix":14,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":7,"Type":"ANY","Var":"MyRamp.Maximum"}],"X":1,"Y":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":10,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Setpoint"},{"__type":"PRM","Arg":"In2","Ix":11,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyRamp.Maximum"}],"Ix":16,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":4,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":12,"Type":"ANY","Var":"MyRamp.Maximum"}],"Ix":17,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":13,"Type":"ANY","Var":"Setpoint"}],"X":2,"Y":4},{"__type":"LD","Ix":1,"Var":"P_First_Run","X":1,"Y":5},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":8,"Type":"ANY","Var":"StartSetpoint"}],"Ix":15,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":9,"Type":"ANY","Var":"Output_Work"}],"X":2,"Y":5},{"__type":"HL","X":2,"Y":2},{"__type":"HL","X":2,"Y":3}],"CMT":"Copy startup value in structure","LRI":18,"RRI":19,"VLs":[{"Ix":20,"X":1},{"Ix":20,"X":1,"Y":1},{"Ix":20,"X":1,"Y":2},{"Ix":20,"X":1,"Y":3},{"Ix":20,"X":1,"Y":4},{"Ix":21,"X":2}]}
{"CLs":[{"__type":"LD","Var":"MyRamp.Enabled"},{"__type":"IST","EID":"30a262ea-5969-45de-ada1-00fbd0ba3dcb","H":106,"Ix":5,"TXT":"Step_Ramp := (MyRamp.Maximum * 0.02) \/ RampTime;","W":648,"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"}],"Ix":4,"Name":"Get20msClk","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1},{"__type":"ST","Id":"8ef41f47-bd9a-48c7-861c-2edc0000001b","Ix":2,"Up":true,"Var":"Clock","X":2,"Y":1},{"__type":"LD","Ix":1,"Not":true,"Var":"Enabled","X":1,"Y":2},{"__type":"ST","Ix":3,"Var":"Stop","X":2,"Y":2},{"__type":"HL","X":2}],"CMT":"Compute the step","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":1},{"Ix":8,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output_Work"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Setpoint"}],"Ix":8,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"LD","Ix":2,"Var":"Stop","Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":6,"Type":"ANY_ELEMENTARY, ENUM","Var":"Output_Work"},{"__type":"PRM","Arg":"In2","Ix":7,"Type":"ANY_ELEMENTARY, ENUM","Var":"REAL#0"}],"Ix":9,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1},{"__type":"ST","Ix":3,"Var":"iDown","X":2},{"__type":"LD","Ix":1,"Var":"Clock","X":2,"Y":1},{"__type":"IST","EID":"697da71b-0e80-41d5-922c-1380d4cdaee8","H":266.00000000000011,"Ix":10,"TXT":"\/\/ Decrease value\u000d\u000aOutput_Work := Output_Work - Step_Ramp;\u000d\u000a\u000d\u000a\/\/ If value is under setpoint, directly the setpoint in the output\u000d\u000aIF not Stop THEN\u000d\u000a\u0009IF Output_Work < Setpoint THEN\u000d\u000a\u0009\u0009Output_Work := Setpoint;\u000d\u000a\u0009END_IF;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\u000d\u000a\/\/ A last control is done to ensure the value is not going below 0.\u000d\u000aIF Output_Work < REAL#0 THEN\u000d\u000a\u0009Output_Work := REAL#0;\u000d\u000aEND_IF;","W":564,"X":3,"Y":1},{"__type":"HL","X":3}],"CMT":"For Output > Setpoint","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output_Work"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Setpoint"}],"Ix":5,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"ST","Ix":2,"Var":"iUp","X":2},{"__type":"LD","Ix":1,"Var":"Clock","X":2,"Y":1},{"__type":"IST","EID":"7bb9f535-5a60-42c7-8673-608f124d0ea8","H":262,"Ix":6,"TXT":"\/\/ Decrease value\u000d\u000aOutput_Work := Output_Work + Step_Ramp;\u000d\u000a\u000d\u000a\/\/ If value is over setpoint, directly the setpoint in the output\u000d\u000aIF Output_Work > Setpoint THEN\u000d\u000a\u0009Output_Work := Setpoint;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ A last control is done to ensure the value is not going above max\u000d\u000aIF Output_Work > MyRamp.Maximum THEN\u000d\u000a\u0009Output_Work := MyRamp.Maximum;\u000d\u000aEND_IF;","W":564.99999999999989,"X":3,"Y":1},{"__type":"HL","X":3}],"CMT":"For Output < Setpoint","LRI":7,"RRI":8,"VLs":[{"Ix":9,"X":2}]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"IST","EID":"6a77e699-75b1-4726-badb-07955c4fb141","H":179,"Ix":38,"TXT":"\/\/ Add master to output\u000d\u000aIF Master.IsUsed THEN\u000d\u000a\u0009Output := Output_Work * (Master.Value \/ Master.Maximum ); \u000d\u000aELSE\u000d\u000a\u0009Output := Output_Work;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aMyRamp.Value := Output;","W":923,"X":1},{"__type":"LD","Ix":1,"Var":"MyRamp.Enabled","X":1,"Y":1},{"__type":"LD","Ix":14,"Var":"P_On","X":2,"Y":1},{"__type":"LD","Ix":15,"Var":"Master.IsUsed","X":2,"Y":2},{"__type":"LD","Ix":16,"Var":"Master.IsOn","X":3,"Y":2},{"__type":"HL","X":3,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":29,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Setpoint"},{"__type":"PRM","Arg":"In2","Ix":30,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"REAL#0"}],"Ix":35,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":4,"Y":1,"PL":true},{"__type":"ST","Ix":19,"S":true,"Var":"Ramp_On","X":5,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":31,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Output"},{"__type":"PRM","Arg":"In2","Ix":32,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"REAL#0"}],"Ix":36,"Name":"<=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":3,"PL":true},{"__type":"LD","Ix":12,"Var":"Master.IsUsed","X":1,"Y":4},{"__type":"LD","Ix":13,"Var":"Master.IsOff","X":2,"Y":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":33,"Type":"ANY","Var":"0"}],"Ix":37,"Name":"@MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":34,"Type":"ANY","Var":"Output_Work"}],"X":3,"Y":4,"Id":"8ef41f47-bd9a-48c7-861c-2edc00000062"},{"__type":"HL","X":3,"Y":3},{"__type":"ST","Ix":20,"RS":true,"Var":"Ramp_On","X":4,"Y":3},{"__type":"LD","Ix":9,"Var":"Ramp_On","X":1,"Y":5},{"__type":"ST","Ix":27,"Var":"MyRamp.IsOn","X":2,"Y":5},{"__type":"LD","Ix":2,"Var":"Ramp_On","X":1,"Y":6},{"__type":"ST","Ix":21,"Not":true,"Var":"Ramp_Off","X":2,"Y":6},{"__type":"ST","Ix":26,"Not":true,"Var":"MyRamp.IsOff","X":3,"Y":6},{"__type":"LD","Ix":3,"Var":"iUp","X":1,"Y":7},{"__type":"LD","Ix":7,"Not":true,"Var":"Master.IsDown","X":2,"Y":7},{"__type":"LD","Ix":5,"Var":"Master.IsUp","X":1,"Y":8},{"__type":"LD","Ix":17,"Var":"MyRamp.Enabled","X":2,"Y":8},{"__type":"ST","Ix":22,"Var":"Ramp_Up","X":3,"Y":7},{"__type":"ST","Ix":24,"Var":"MyRamp.IsUp","X":4,"Y":7},{"__type":"LD","Ix":4,"Var":"iDown","X":1,"Y":9},{"__type":"LD","Ix":8,"Not":true,"Var":"Master.IsUp","X":2,"Y":9},{"__type":"LD","Ix":6,"Var":"Master.IsDown","X":1,"Y":10},{"__type":"LD","Ix":18,"Var":"MyRamp.Enabled","X":2,"Y":10},{"__type":"ST","Ix":23,"Var":"Ramp_Down","X":3,"Y":9},{"__type":"ST","Ix":25,"Var":"MyRamp.IsDown","X":4,"Y":9},{"__type":"LD","Ix":10,"Var":"MyRamp.IsUp","X":1,"Y":11},{"__type":"LD","Ix":11,"Var":"MyRamp.IsDown","X":1,"Y":12},{"__type":"ST","Ix":28,"Var":"MyRamp.IsTransition","X":2,"Y":11},{"__type":"HL","X":2},{"__type":"HL","X":3},{"__type":"HL","X":4},{"__type":"HL","X":5},{"__type":"HL","X":5,"Y":3},{"__type":"HL","X":3,"Y":5},{"__type":"HL","X":4,"Y":5},{"__type":"HL","X":5,"Y":5},{"__type":"HL","X":4,"Y":6},{"__type":"HL","X":5,"Y":6},{"__type":"HL","X":5,"Y":7},{"__type":"HL","X":5,"Y":9},{"__type":"HL","X":3,"Y":11},{"__type":"HL","X":4,"Y":11},{"__type":"HL","X":5,"Y":11}],"CMT":"Output computation and status","LRI":39,"RRI":40,"VLs":[{"Ix":41,"X":1},{"Ix":41,"X":1,"Y":1},{"Ix":41,"X":1,"Y":2},{"Ix":41,"X":1,"Y":3},{"Ix":41,"X":1,"Y":4},{"Ix":41,"X":1,"Y":5},{"Ix":41,"X":1,"Y":6},{"Ix":41,"X":1,"Y":7},{"Ix":41,"X":1,"Y":8},{"Ix":41,"X":1,"Y":9},{"Ix":41,"X":1,"Y":10},{"Ix":41,"X":1,"Y":11},{"Ix":42,"X":3,"Y":7},{"Ix":43,"X":3,"Y":9},{"Ix":44,"X":2,"Y":11},{"Ix":45,"X":4,"Y":3},{"Ix":46,"X":2,"Y":1},{"Ix":46,"X":2,"Y":2},{"Ix":47,"X":4,"Y":1}]}
