{"CLs":[{"__type":"LD","Id":"2922fc1b-a3b6-4a6c-b165-99b500000002","Up":true,"Var":"Network_Check"},{"__type":"LD","Ix":1,"Var":"P_First_Run","Y":1},{"__type":"IST","EID":"05d125d1-a70d-426b-ab9d-a9d7e8b53eeb","H":204.00000000000006,"Ix":2,"TXT":"i := 0;\u000d\u000a\u000d\u000a\/\/ Check node 1\u000d\u000aIF Node_1 > 0 THEN\u000d\u000a\u0009Node[i] := Node_1;\u000d\u000a\u0009Inc(i);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Check node 2\u000d\u000aIF Node_2 > 0 THEN\u000d\u000a\u0009Node[i] := Node_2;\u000d\u000a\u0009Inc(i);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Check node 3\u000d\u000aIF Node_3 > 0 THEN\u000d\u000a\u0009Node[i] := Node_3;\u000d\u000a\u0009Inc(i);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Check node 4\u000d\u000aIF Node_4 > 0 THEN\u000d\u000a\u0009Node[i] := Node_4;\u000d\u000a\u0009Inc(i);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Check node 5\u000d\u000aIF Node_5 > 0 THEN\u000d\u000a\u0009Node[i] := Node_5;\u000d\u000a\u0009Inc(i);\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aSize := i-1;","W":483,"X":1}],"CMT":"At startup, put in array all node to check","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
{"CLs":[{"__type":"LD","Var":"Network_Check"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Size"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"0"}],"Ix":3,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"IST","EID":"89bafe43-b8e5-4994-a1bc-d445cf43d5e9","H":379.99999999999983,"Ix":4,"TXT":"\/\/ Init value\u000d\u000aNetwork_Fault := FALSE;\u000d\u000aNetwork_NeedReset := FALSE;\u000d\u000a\u000d\u000a\/\/ For each node\u000d\u000aFor i := 0 TO Size DO\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Check if node is programmed, not disabled and not in run mode\u000d\u000a\u0009IF _EC_RegSlavTbl[Node[i]] AND NOT _EC_DisableSlavTbl[Node[i]] AND NOT _EC_PDSlavTbl[Node[i]] THEN\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009Network_Fault := TRUE;\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Network in fault\u000d\u000a\u000d\u000a\u0009\u0009\/\/ Check if comm is ready for reset\u000d\u000a\u0009\u0009IF _EC_EntrySlavTbl[Node[i]] THEN\u000d\u000a\u0009\u0009\u0009Network_NeedReset := TRUE;\u0009\u0009\u0009\u0009\u0009\/\/ Network can be reseted\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009END_IF;\u000d\u000a\u0009\u000d\u000aEND_FOR;","W":812,"X":2}],"CMT":"Check network state","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Network_Check"},{"__type":"LD","Ix":1,"Not":true,"Var":"Network_Fault","X":1},{"__type":"ST","Ix":4,"Var":"Network_Run","X":2},{"__type":"LD","Ix":3,"Var":"Network_Fault","X":1,"Y":1},{"__type":"ST","Ix":5,"Var":"MyStatus.Comm_Hardware_Fault","X":2,"Y":1},{"__type":"ST","Ix":7,"Var":"Fault","X":3,"Y":1},{"__type":"LD","Ix":2,"Var":"Network_NeedReset","X":1,"Y":2},{"__type":"ST","Ix":6,"Var":"MyStatus.Comm_Hardware_NeedReset","X":2,"Y":2},{"__type":"ST","Ix":8,"Var":"NeedReset","X":3,"Y":2},{"__type":"HL","X":3}],"CMT":"Status","LRI":9,"RRI":10,"VLs":[{"Ix":11,"X":1},{"Ix":11,"X":1,"Y":1}]}
