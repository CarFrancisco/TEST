{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"ST","Ix":4,"Var":"Axis_Used","X":1},{"__type":"ST","Ix":5,"Var":"Axis.Status.Enabled","X":1,"Y":1},{"__type":"ST","Ix":3,"Var":"Axis.Cfg.AnalogUsed","X":1,"Y":2},{"__type":"LD","Ix":2,"Var":"Feedback_Used","X":1,"Y":3},{"__type":"ST","Ix":7,"Var":"Axis.Cfg.FeedbackUsed","X":2,"Y":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":8,"Type":"ANY","Var":"At_Velocity"}],"Ix":22,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":9,"Type":"ANY","Var":"Axis.Scale.Factor_VelCmd"}],"X":1,"Y":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":10,"Type":"ANY","Var":"Unit"}],"Ix":23,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":11,"Type":"ANY","Var":"Axis.Scale.UserCmd_Unit"}],"X":2,"Y":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":12,"Type":"ANY_ELEMENTARY, ENUM","Var":"Axis.Corr.SP_a"},{"__type":"PRM","Arg":"In2","Ix":13,"Type":"ANY_ELEMENTARY, ENUM","Var":"+0"}],"Ix":24,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":5,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":14,"Type":"ANY","Var":"+1"}],"Ix":25,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":15,"Type":"ANY","Var":"Axis.Corr.SP_a"}],"X":2,"Y":5},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":16,"Type":"ANY_ELEMENTARY, ENUM","Var":"Axis.Corr.FB_a"},{"__type":"PRM","Arg":"In2","Ix":17,"Type":"ANY_ELEMENTARY, ENUM","Var":"+0"}],"Ix":26,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":6,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":18,"Type":"ANY","Var":"+1"}],"Ix":27,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":19,"Type":"ANY","Var":"Axis.Corr.FB_a"}],"X":2,"Y":6},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":20,"Type":"ANY","Var":"Velocity_Max"}],"Ix":28,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":21,"Type":"ANY","Var":"Axis.Cfg.VelCmd_Max"}],"X":1,"Y":7},{"__type":"LD","Ix":1,"Var":"Commissioning","X":1,"Y":8},{"__type":"ST","Ix":6,"Var":"Axis.Status.Commissioning","X":2,"Y":8},{"__type":"HL","X":2},{"__type":"HL","X":2,"Y":1},{"__type":"HL","X":2,"Y":2},{"__type":"HL","X":2,"Y":7}],"CMT":"Config","LRI":29,"RRI":30,"VLs":[{"Ix":31,"X":1},{"Ix":31,"X":1,"Y":1},{"Ix":31,"X":1,"Y":2},{"Ix":31,"X":1,"Y":3},{"Ix":31,"X":1,"Y":4},{"Ix":31,"X":1,"Y":5},{"Ix":31,"X":1,"Y":6},{"Ix":31,"X":1,"Y":7}]}
{"CLs":[{"__type":"LD","Var":"Axis.Status.Enabled"},{"__type":"LD","Ix":1,"Not":true,"Var":"Axis.Cfg.PowerUsed","X":1},{"__type":"LD","Ix":2,"Var":"Axis.Cfg.PowerUsed","X":1,"Y":1},{"__type":"LD","Ix":3,"Var":"Axis.Cmd.Power","X":2,"Y":1},{"__type":"HL","X":2},{"__type":"ST","Ix":4,"Var":"Axis.Status.Powered","X":3}],"CMT":"Drive power ON if security relay is SET","LRI":5,"RRI":6,"VLs":[{"Ix":7,"X":1},{"Ix":8,"X":3}]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"Axis.Status.Powered"},{"__type":"LD","Var":"Axis.Cmd.Run_Vel","X":1},{"__type":"LD","Ix":1,"Var":"Axis.Cmd.Run_Trq","X":1,"Y":1},{"__type":"LD","Ix":3,"Var":"Axis.Cmd.CW","X":2},{"__type":"ST","Ix":5,"Var":"CW","X":3},{"__type":"LD","Ix":4,"Var":"Axis.Cmd.CCW","X":2,"Y":1},{"__type":"ST","Ix":7,"Var":"CCW","X":3,"Y":1},{"__type":"ST","Ix":6,"Var":"Axis.Status.Run","X":2,"Y":2},{"__type":"HL","X":3,"Y":2}],"CMT":"Command the motor","LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":2},{"Ix":10,"X":2,"Y":1},{"Ix":11,"X":1}]}
{"CLs":[{"__type":"LD","Var":"Axis.Status.Run"},{"__type":"IST","EID":"11015935-5e16-4b59-844e-c93939bd5909","H":431.99999999999983,"Ix":5,"TXT":"\/\/ Add ax+b correction to setpoint value [x]\u000d\u000aVelocity_SP := Axis.Cmd.Vel * Axis.Corr.SP_a + Axis.Corr.SP_b;\u000d\u000a\u000d\u000a\/\/ Convert in Hz with Speed\/Hz report [Hz]\u000d\u000aAxis.Scale.Factor := Volt \/ At_Velocity;\u000d\u000aVelocity_SP := Velocity_SP * Axis.Scale.Factor ;\u000d\u000a\u000d\u000a\/\/ Limit frequency to max\u000d\u000aAxis.Cmd.Motor := LIMIT( REAL#0, Velocity_SP, Volt_Max);\u000d\u000a\u000d\u000a\/\/ Output setpoint [0.01 Hz]\u000d\u000aIF ( Axis.Cmd.Motor = 0 OR Axis.Cmd.Vel = 0) THEN\u000d\u000a\u0009Speed_Setpoint:= 0;\u000d\u000aELSE\u000d\u000a\u0009Speed_Setpoint:= REAL_TO_INT(Axis.Cmd.Motor * 400);\u000d\u000aEND_IF;","W":933.555555555556,"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"Velocity_SP"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"Axis.Cmd.Motor"}],"Ix":4,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1},{"__type":"ST","Ix":1,"Var":"Axis.Obsr.Cmd_Limited","X":2,"Y":1},{"__type":"HL","X":2}],"CMT":"Calcule the frequency of motor from speed setpoint","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":1}]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"IST","EID":"869f493c-5a1d-475e-bb2c-0f6517081984","H":521,"Ix":5,"TXT":"\/\/ If drive is running, compute feedback\u000d\u000aIF Axis.Cfg.FeedbackUsed THEN\u000d\u000a\u0009IF( Axis.Status.Run ) THEN\u000d\u000a\u0009\u0009\u0009\u0009\u000d\u000a\u0009\u0009\/\/ Input setpoint in [Hz]\u000d\u000a\u0009\u0009Axis.Act.Cmd := INT_TO_REAL(Speed_Feedback)\/400;\u000d\u000a\u000d\u000a\u0009\u0009\/\/ Convert in speed with Speed\/Hz report [x]\u000d\u000a\u0009\u0009Velocity_FB :=Axis.Act.Cmd \/ Axis.Scale.Factor;\u000d\u000a\u000d\u000a\u0009\u0009\/\/ Add ax+b correction to feedback value [x]\u000d\u000a\u0009\u0009Axis.Act.Vel := Velocity_FB * Axis.Corr.FB_a + Axis.Corr.FB_b;\u000d\u000a\u000d\u000a\u0009\u0009\/\/ Output feedback [x]\u000d\u000a\u0009\u0009IF Axis.Act.Vel<0 OR Speed_Feedback=0 THEN\u000d\u000a\u0009\u0009\u0009Axis.Act.Vel := 0;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009\u0009\u0009\u0009\u000d\u000a\u0009ELSE\u000d\u000a\u0009\u0009Axis.Act.Vel := 0;\u000d\u000a\u0009END_IF;\u0009\u000d\u000aELSE \u000d\u000a\u0009Axis.Act.Vel := Axis.Cmd.Vel;\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u000d\u000aEND_IF;","W":946,"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Axis.Act.Vel"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Axis.Cfg.VelCmd_Max"}],"Ix":4,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"Y":1,"PL":true},{"__type":"ST","Ix":1,"Var":"Axis.Obsr.Feedback_TooHigh","X":2,"Y":1},{"__type":"HL","X":2}],"CMT":"Calcule the feedback speed from frequence feedback","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":1}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":3,"Var":"CW","X":1},{"__type":"ST","Ix":9,"Var":"Axis.Status.CW","X":2},{"__type":"LD","Ix":4,"Var":"CCW","X":1,"Y":1},{"__type":"ST","Ix":10,"Var":"Axis.Status.CCW","X":2,"Y":1},{"__type":"LD","Ix":1,"Not":true,"Var":"Axis.Status.CW","X":1,"Y":2},{"__type":"LD","Ix":2,"Not":true,"Var":"Axis.Status.CCW","X":2,"Y":2},{"__type":"ST","Ix":15,"Var":"Axis.Status.Stopped","X":3,"Y":2},{"__type":"LD","Ix":5,"Var":"Drive_Fault","X":1,"Y":3},{"__type":"ST","Ix":11,"Var":"Axis.Fault.Error_Drive","X":2,"Y":3},{"__type":"LD","Ix":8,"Var":"P_Off","X":1,"Y":4},{"__type":"ST","Ix":14,"Var":"Axis.Obsr.Warning_Drive","X":2,"Y":4},{"__type":"LD","Ix":7,"Var":"P_Off","X":1,"Y":5},{"__type":"ST","Ix":12,"Var":"Axis.Fault.Remote","X":2,"Y":5},{"__type":"LD","Ix":6,"Var":"P_Off","X":1,"Y":6},{"__type":"ST","Ix":13,"Var":"Axis.Fault.Optional_Board","X":2,"Y":6},{"__type":"HL","X":3},{"__type":"HL","X":3,"Y":1},{"__type":"HL","X":3,"Y":3},{"__type":"HL","X":3,"Y":4},{"__type":"HL","X":3,"Y":5},{"__type":"HL","X":3,"Y":6}],"CMT":"Read status of drive","LRI":16,"RRI":17,"VLs":[{"Ix":18,"X":1},{"Ix":18,"X":1,"Y":1},{"Ix":18,"X":1,"Y":2},{"Ix":18,"X":1,"Y":3},{"Ix":18,"X":1,"Y":4},{"Ix":18,"X":1,"Y":5}]}
{"CLs":[{"__type":"LD","Var":"Axis.Status.Enabled"},{"__type":"LD","Ix":1,"Var":"Axis.Obsr.Warning_Drive","X":1},{"__type":"LD","Ix":2,"Var":"Axis.Obsr.Cmd_Limited","X":1,"Y":1},{"__type":"LD","Ix":3,"Var":"Axis.Obsr.Vel_TooHigh","X":1,"Y":2},{"__type":"LD","Ix":4,"Var":"Axis.Obsr.Feedback_TooHigh","X":1,"Y":3},{"__type":"ST","Ix":8,"Var":"Axis.Status.Warning","X":2},{"__type":"LD","Ix":5,"Var":"Axis.Fault.Error_Drive","X":1,"Y":4},{"__type":"LD","Ix":6,"Var":"Axis.Fault.Remote","X":1,"Y":5},{"__type":"LD","Ix":7,"Var":"Axis.Fault.Optional_Board","X":1,"Y":6},{"__type":"ST","Ix":10,"Var":"Fault_Status","X":2,"Y":4},{"__type":"ST","Ix":9,"Var":"Axis.Status.Fault","X":3,"Y":4},{"__type":"HL","X":3}],"CMT":"Set error or warning status in output. We have this status only in the invertor is set and running","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":2,"Y":4},{"Ix":13,"X":2,"Y":5},{"Ix":14,"X":2},{"Ix":14,"X":2,"Y":1},{"Ix":14,"X":2,"Y":2},{"Ix":15,"X":1},{"Ix":15,"X":1,"Y":1},{"Ix":15,"X":1,"Y":2},{"Ix":15,"X":1,"Y":3},{"Ix":15,"X":1,"Y":4},{"Ix":15,"X":1,"Y":5}]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"Axis.Status.Enabled"},{"__type":"LD","Id":"850c02aa-45f6-4086-9793-a75500000073","Up":true,"Var":"Axis.Cmd.Reset","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":3,"Type":"TIME","Var":"T#1s"}],"Ix":5,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":2,"Var":"Timer_Reset"},{"__type":"ST","Ix":2,"Var":"Reset","X":3}],"CMT":"Reset the invertor if needed","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Axis.Status.Enabled"},{"__type":"LD","Ix":2,"Var":"Axis.Obsr.Vel_TooHigh","X":1},{"__type":"ST","Ix":9,"Var":"Int_Fault_Code.Bool_Data[0]","X":2},{"__type":"LD","Ix":3,"Var":"Axis.Obsr.Feedback_TooHigh","X":1,"Y":1},{"__type":"ST","Ix":10,"Var":"Int_Fault_Code.Bool_Data[1]","X":2,"Y":1},{"__type":"LD","Ix":4,"Var":"Axis.Obsr.Warning_Drive","X":1,"Y":2},{"__type":"ST","Ix":11,"Var":"Int_Fault_Code.Bool_Data[2]","X":2,"Y":2},{"__type":"LD","Ix":5,"Var":"Axis.Obsr.Cmd_Limited","X":1,"Y":3},{"__type":"ST","Ix":16,"Var":"Int_Fault_Code.Bool_Data[3]","X":2,"Y":3},{"__type":"LD","Ix":6,"Var":"Axis.Fault.Remote","X":1,"Y":4},{"__type":"ST","Ix":12,"Var":"Int_Fault_Code.Bool_Data[5]","X":2,"Y":4},{"__type":"LD","Ix":7,"Var":"Axis.Fault.Error_Drive","X":1,"Y":5},{"__type":"ST","Ix":13,"Var":"Int_Fault_Code.Bool_Data[6]","X":2,"Y":5},{"__type":"LD","Ix":8,"Var":"Axis.Fault.Optional_Board","X":1,"Y":6},{"__type":"ST","Ix":14,"Var":"Int_Fault_Code.Bool_Data[7]","X":2,"Y":6},{"__type":"LD","Ix":1,"Var":"Axis.Fault.Reset_NotWork","X":1,"Y":7},{"__type":"ST","Ix":15,"Var":"Int_Fault_Code.Bool_Data[15]","X":2,"Y":7},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":17,"Type":"ANY","Var":"Int_Fault_Code.Word_Data"}],"Ix":19,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":18,"Type":"ANY","Var":"Fault_Code"}],"X":1,"Y":8},{"__type":"HL","X":2,"Y":8}],"CMT":"Generate error code for output","LRI":20,"RRI":21,"VLs":[{"Ix":22,"X":1},{"Ix":22,"X":1,"Y":1},{"Ix":22,"X":1,"Y":2},{"Ix":22,"X":1,"Y":3},{"Ix":22,"X":1,"Y":4},{"Ix":22,"X":1,"Y":5},{"Ix":22,"X":1,"Y":6},{"Ix":22,"X":1,"Y":7}]}
