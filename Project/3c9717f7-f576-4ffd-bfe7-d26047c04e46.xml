{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"IST","EID":"f83545cc-ca0d-4abb-a02a-f5da1618c619","H":147,"Ix":1,"TXT":"\/\/ Init max alarms\u000d\u000aMyProd.Max_Alarms := SizeOfAry(Prod.Alarms);\u000d\u000a\u000d\u000a\/\/ Save modulo limit\u000d\u000aModulo_Limit_High := LREAL_TO_REAL(Modulo - 1);\u000d\u000aModulo_Limit_Low := LREAL_TO_REAL(Modulo - 2);","W":657.99999999999989,"X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":1,"Not":true,"Var":"Simu_En","X":1},{"__type":"IST","EID":"5d30939d-6a4d-45e3-b353-310145efa1bb","H":91,"Ix":2,"TXT":"\/\/ Convert in [m]\u000d\u000aMyProd.Position := LREAL_TO_REAL( Axis_Ref.Act.Pos \/ 1000);","W":803,"X":2}],"CMT":"Order","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":1,"Var":"Simu_En","X":1},{"__type":"IST","EID":"65d474fe-116c-4376-9948-675c29c02687","H":147,"Ix":2,"TXT":"\/\/ Compute modulo value\u000d\u000aModulo_Limit_High := LREAL_TO_REAL(Modulo - 1);\u000d\u000aModulo_Limit_Low := LREAL_TO_REAL(Modulo - 2);\u000d\u000a\u000d\u000a\/\/ Compute distance of product during 100ms\u000d\u000aDist_100ms := (Simu_LineSpeed \/ 600)\/25;","W":740,"X":2}],"CMT":"______________________________________________________________________________________________________\u000a¦   Simulation                                                                                                                                     ¦\u000a¦_____________________________________________________________________________________________________¦\u000d\u000a\u000d\u000aStart analysing modulo reset when the distance is almost the module valueIn simulation mode","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Simu_En"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Simu_LineSpeed"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"0"}],"Ix":8,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"LD","Id":"83cf86aa-f7af-46c2-aaf7-137600000014","Ix":1,"Up":true,"Var":"T_100ms","X":2},{"__type":"LD","Ix":2,"Var":"P_On","X":2,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"ANY_NUM, STRING","Var":"MyProd.Position"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"ANY_NUM, STRING","Var":"Dist_100ms"}],"Ix":9,"Name":"+","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":7,"Type":"ANY_NUM, STRING","Var":"MyProd.Position"}],"X":3,"PL":true}],"CMT":"Update position","LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":2},{"Ix":13,"X":3}]}
{"CLs":[{"__type":"LD","Var":"Simu_En"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":1,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyProd.Position"},{"__type":"PRM","Arg":"In2","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Modulo"}],"Ix":5,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":3,"Type":"ANY","Var":"0"}],"Ix":6,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":4,"Type":"ANY","Var":"MyProd.Position"}],"X":2}],"CMT":"Check modulo","LRI":7,"RRI":8,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyProd.Position"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Modulo_Limit_Low"}],"Ix":6,"Name":">","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyProd.Position"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"Modulo_Limit_High"}],"Ix":7,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":2,"PL":true},{"__type":"ST","Ix":1,"S":true,"Var":"Modulo_Check","X":3}],"CMT":"______________________________________________________________________________________________________\u000a¦   Modulo management                                                                                                                   ¦\u000a¦_____________________________________________________________________________________________________¦\u000d\u000a\u000d\u000aStart analysing modulo reset when the distance is almost the module value","LRI":8,"RRI":9,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Modulo_Check"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"MyProd.Position"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"1"}],"Ix":5,"Name":"<","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"ST","Ix":2,"RS":true,"Var":"Modulo_Check","X":2},{"__type":"ST","Ix":1,"Var":"Modulo_Reset","X":3}],"CMT":"Check when modulo is resetting","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Modulo_Reset"},{"__type":"IST","EID":"864223cc-ec59-4478-984e-9bea90599961","H":318.99999999999994,"Ix":1,"TXT":"\/\/ Check for every alarms\u000d\u000aFor i := 0 To MyProd.Last_Alarm DO\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Only check enabled alarm\u000d\u000a\u0009IF MyProd.Alarms[i].Enabled THEN\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\/\/ Compute new starting position\u000d\u000a\u0009\u0009MyProd.Alarms[i].PosStart := MyProd.Alarms[i].PosStart - LREAL_TO_REAL( Modulo);\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\/\/ Compute new stop position unless alarms is still occuring\u000d\u000a\u0009\u0009IF not MyProd.Alarms[i].State THEN\u000d\u000a\u0009\u0009\u0009MyProd.Alarms[i].PosStop := MyProd.Alarms[i].PosStop - LREAL_TO_REAL(Modulo);\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009\u0009\u000d\u000a\u0009END_IF;\u000d\u000aEND_FOR;","W":987.00000000000023,"X":1}],"CMT":"When modulo is resetted, update every alarms position","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"Enabled"},{"__type":"IST","EID":"c81152f9-da79-49e0-8f8e-a3e469b1eeef","H":172,"Ix":7,"TXT":"\/\/ If drawoff is on\u000d\u000aIF LineSpeed_SP > 0.5 THEN\u000d\u000a\u0009\/\/ Check if line speed is in range\u000d\u000a\u0009Speed_InRange :=  (Axis_Ref.Act.Vel\/1000*60)>(LineSpeed_SP*0.8);\u000d\u000aELSE\u000d\u000a\u0009Speed_InRange := TRUE;\u000d\u000aEND_IF;","W":791,"X":1},{"__type":"LD","Not":true,"Var":"Speed_InRange","X":1,"Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":4,"Type":"TIME","Var":"T#3s"}],"Ix":6,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":5,"Type":"TIME","Var":""}],"X":2,"Y":1,"Var":"Wait_NotInRange"},{"__type":"ST","Ix":3,"Var":"MyProd.Msg.NotWorking","X":3,"Y":1},{"__type":"ST","Ix":2,"Var":"NoMouvement","X":4,"Y":1},{"__type":"HL","X":2},{"__type":"HL","X":3},{"__type":"HL","X":4}],"CMT":"______________________________________________________________________________________________________\u000a¦   Line speed management                                                                                                               ¦\u000a¦_____________________________________________________________________________________________________¦\u000d\u000a\u000d\u000aIf the line is running, but we don't have mouvement on the encoder axis, generate a default","LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":1}]}
